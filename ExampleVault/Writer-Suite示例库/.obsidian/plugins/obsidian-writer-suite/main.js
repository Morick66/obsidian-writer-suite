/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/view/tocView.ts
var import_obsidian5 = require("obsidian");

// src/helper/WordCount.ts
var import_obsidian = require("obsidian");
var WordCounter = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async getWordCount(file) {
    const fileContents = await this.plugin.app.vault.read(file);
    const countPunctuation = this.plugin.settings.countPunctuation;
    const words = fileContents.replace(/\s/g, "");
    if (!countPunctuation) {
      const noPunctuation = words.replace(/[\p{P}\p{S}]/gu, "");
      return noPunctuation.length;
    }
    return words.length;
  }
  async getTotalWordCount(folder) {
    let totalWordCount = 0;
    const calculateWordCount = async (folder2) => {
      for (const child of folder2.children) {
        if (child instanceof import_obsidian.TFile) {
          const wordCount = await this.getWordCount(child);
          totalWordCount += wordCount;
        } else if (child instanceof import_obsidian.TFolder) {
          await calculateWordCount(child);
        }
      }
    };
    await calculateWordCount(folder);
    return totalWordCount;
  }
};

// src/model/deleteModal.ts
var import_obsidian2 = require("obsidian");
var ConfirmDeleteModal = class extends import_obsidian2.Modal {
  constructor(app, fileOrFolder, view, refreshCallback) {
    super(app);
    this.fileOrFolder = fileOrFolder;
    this.view = view;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { cls: "pluginModal", text: "\u786E\u8BA4\u5220\u9664" });
    const fileType = this.fileOrFolder instanceof import_obsidian2.TFile ? "\u6587\u4EF6" : "\u6587\u4EF6\u5939";
    contentEl.createEl("span", { text: `\u5220\u9664${fileType}\u2014\u2014` });
    const strongtext = contentEl.createEl("span", { text: `${this.fileOrFolder.name.replace(/\.md$/, "")}` });
    strongtext.style.fontWeight = "bold";
    strongtext.style.color = "var(--bold-color)";
    new import_obsidian2.ButtonComponent(contentEl).setButtonText("\u5220\u9664").setCta().onClick(async () => {
      await this.app.vault.trash(this.fileOrFolder, false);
      this.close();
    });
    new import_obsidian2.ButtonComponent(contentEl).setButtonText("\u53D6\u6D88").onClick(() => {
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/model/newChapterModal.ts
var import_obsidian3 = require("obsidian");
var NewChapterModal = class extends import_obsidian3.Modal {
  constructor(app, folder, view, itemType, refreshCallback) {
    super(app);
    this.folder = folder;
    this.view = view;
    this.itemType = itemType;
    this.refreshCallback = refreshCallback;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { cls: "pluginModal", text: `\u65B0\u5EFA${this.itemType}` });
    const input = new import_obsidian3.TextComponent(contentEl);
    input.setPlaceholder(`${this.itemType}\u540D\u79F0`);
    new import_obsidian3.ButtonComponent(contentEl).setButtonText("\u521B\u5EFA").setCta().onClick(async () => {
      const fileName = input.getValue();
      if (!fileName) {
        new import_obsidian3.Notice(`${this.itemType}\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A`);
        return;
      }
      const filePath = `${this.folder.path}/${fileName}.md`;
      await this.app.vault.create(filePath, "");
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/model/newItemModal.ts
var import_obsidian4 = require("obsidian");
var NewItemModal = class extends import_obsidian4.Modal {
  constructor(app, folder, view, refreshCallback) {
    super(app);
    this.folder = folder;
    this.view = view;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("p", { text: "\u65B0\u5EFA\u5377/\u7AE0\u8282", cls: "modal-title" });
    const nameInput = new import_obsidian4.TextComponent(contentEl);
    nameInput.setPlaceholder("\u8F93\u5165\u5377/\u7AE0\u8282\u540D\u79F0...");
    const createFolderButton = new import_obsidian4.ButtonComponent(contentEl);
    createFolderButton.setButtonText("\u65B0\u5377").onClick(async () => {
      const name = nameInput.getValue();
      if (name) {
        await this.app.vault.createFolder(`${this.folder.path}/${name}`);
        new import_obsidian4.Notice(`Folder '${name}' created.`);
        this.close();
      }
    });
    const createFileButton = new import_obsidian4.ButtonComponent(contentEl);
    createFileButton.setButtonText("\u65B0\u7AE0\u8282").onClick(async () => {
      const name = nameInput.getValue();
      if (name) {
        const filePath = `${this.folder.path}/${name}.md`;
        await this.app.vault.create(filePath, "");
        new import_obsidian4.Notice(`File '${name}.md' created.`);
        this.close();
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/view/tocView.ts
var VIEW_TYPE_FILE_LIST = "file-list-view";
var TocView = class extends import_obsidian5.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.wordCounter = new WordCounter(plugin);
    this.icon = "list";
  }
  getViewType() {
    return VIEW_TYPE_FILE_LIST;
  }
  getDisplayText() {
    return "File List";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    const title = container.createEl("h2", { text: "" });
    title.className = "view-title";
    const floatingButton = container.createEl("button", {
      cls: "floating-button"
    });
    (0, import_obsidian5.setIcon)(floatingButton, "plus");
    floatingButton.style.display = "none";
    floatingButton.title = "\u65B0\u5EFA\u7AE0\u8282/\u5377";
    floatingButton.addEventListener("click", () => {
      this.showNewItemModal();
    });
    this.refresh();
  }
  // 浮动按钮的显示
  toggleFloatingButton() {
    const floatingButton = this.containerEl.querySelector(".floating-button");
    if (floatingButton) {
      floatingButton.style.display = this.plugin.folderPath !== "" ? "block" : "none";
    }
  }
  // 更新标题
  updateTitle() {
    const title = this.containerEl.querySelector(".view-title");
    if (title) {
      title.textContent = this.plugin.folderPath;
    }
  }
  async refresh() {
    const container = this.containerEl.children[1];
    const existingContent = container.querySelectorAll(".folder-item, ul, p, .info-container");
    existingContent.forEach((el) => el.remove());
    const novelFolderPath = this.plugin.folderPath + "/\u5C0F\u8BF4\u6587\u7A3F";
    const novelFolder = this.app.vault.getAbstractFileByPath(novelFolderPath);
    const shortStoryFilePath = this.plugin.folderPath + "/\u5C0F\u8BF4\u6B63\u6587.md";
    const shortStoryFile = this.app.vault.getAbstractFileByPath(shortStoryFilePath);
    if (novelFolder && novelFolder instanceof import_obsidian5.TFolder) {
      this.displayItems(container, novelFolder);
      this.toggleFloatingButton();
    } else if (shortStoryFile && shortStoryFile instanceof import_obsidian5.TFile) {
      this.displayOutline(container, shortStoryFile);
    } else {
      this.displayInfo(container);
    }
  }
  displayInfo(container) {
    const { settings } = this.plugin;
    const infoContainer = container.createDiv({ cls: "info-container" });
    if (settings.picturePath) {
      const imagePath = `${settings.picturePath}`;
      infoContainer.createEl("img", {
        attr: { alt: imagePath, src: imagePath },
        cls: "user-avatar"
      });
    }
    infoContainer.createEl("h1", { text: settings.name, cls: "user-name" });
    this.getBookCountAndTotalWords().then(({ novelCount, shortStoryCount }) => {
      const novelText = novelCount > 0 ? `${novelCount}` : "0";
      const shortStoryText = shortStoryCount > 0 ? `${shortStoryCount}` : "0";
      const infoText = [
        `\u957F\u7BC7\u5C0F\u8BF4: ${novelText}`,
        `\u77ED\u7BC7\u5C0F\u8BF4: ${shortStoryText}`
      ].join(" | ");
      infoContainer.createDiv({ text: infoText, cls: "book-info" });
    });
  }
  // 异步方法，用于获取书籍数量和总字数
  async getBookCountAndTotalWords() {
    const rootFolder = this.app.vault.getRoot();
    let novelCount = 0;
    let shortStoryCount = 0;
    const processFolder = async (folder) => {
      for (const file of folder.children) {
        if (file instanceof import_obsidian5.TFile && file.path.endsWith("\u4FE1\u606F.md")) {
          const content = await this.app.vault.read(file);
          const type = this.getFileType(content);
          if (type === "novel")
            novelCount++;
          if (type === "short-story")
            shortStoryCount++;
        } else if (file instanceof import_obsidian5.TFolder) {
          await processFolder(file);
        }
      }
    };
    await processFolder(rootFolder);
    return { novelCount, shortStoryCount };
  }
  // 辅助方法，从信息.md的内容中提取type
  getFileType(content) {
    const match = content.match(/type: (novel|short-story)/);
    return match ? match[1] : null;
  }
  displayItems(container, folder) {
    folder.children.forEach((child) => {
      const childContainer = container.createDiv({ cls: "folder-item" });
      if (child instanceof import_obsidian5.TFile) {
        this.displayFile(childContainer, child);
      } else if (child instanceof import_obsidian5.TFolder) {
        this.displayFolder(childContainer, child);
      }
    });
  }
  displayFolder(container, folder) {
    const folderItem = container.createDiv({ cls: "folder-item" });
    const folderHeader = folderItem.createEl("div", { cls: "folder-header" });
    const folderName = folderHeader.createEl("div", { cls: "folder-name" });
    const folderIcon = folderName.createEl("span");
    (0, import_obsidian5.setIcon)(folderIcon, "folder-open");
    folderName.createSpan({ text: folder.name });
    const tocButton = folderHeader.createEl("div", { cls: "tocButton" });
    const addButton = tocButton.createEl("button");
    (0, import_obsidian5.setIcon)(addButton, "plus");
    const deleteButton = tocButton.createEl("button");
    (0, import_obsidian5.setIcon)(deleteButton, "trash");
    deleteButton.title = "\u5220\u9664\u6587\u4EF6\u5939";
    addButton.title = "\u65B0\u5EFA\u7AE0\u8282";
    addButton.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showNewChapterModal(folder);
    });
    deleteButton.addEventListener("click", (e) => {
      e.stopPropagation();
      this.confirmDelete(folder);
    });
    const fileList = folderItem.createEl("ul", { cls: "file-list" });
    fileList.style.display = "block";
    folderHeader.addEventListener("click", () => {
      if (fileList.style.display === "none") {
        fileList.style.display = "block";
        (0, import_obsidian5.setIcon)(folderIcon, "folder-open");
      } else {
        fileList.style.display = "none";
        (0, import_obsidian5.setIcon)(folderIcon, "folder-minus");
      }
    });
    const sortedChildren = folder.children.sort((a, b) => {
      if (a instanceof import_obsidian5.TFile && b instanceof import_obsidian5.TFile) {
        return a.stat.ctime - b.stat.ctime;
      } else if (a instanceof import_obsidian5.TFolder && b instanceof import_obsidian5.TFolder) {
        return a.name.localeCompare(b.name);
      } else {
        return a instanceof import_obsidian5.TFolder ? -1 : 1;
      }
    });
    sortedChildren.forEach((file) => {
      if (file instanceof import_obsidian5.TFile) {
        this.displayFile(fileList, file);
      } else if (file instanceof import_obsidian5.TFolder) {
        this.displayFolder(fileList.createEl("li"), file);
      }
    });
  }
  async displayFile(container, file) {
    const fileItem = container.createEl("li", { cls: "chapter-title" });
    const fileHeader = fileItem.createEl("div", { cls: "file-header" });
    const fileIcon = fileHeader.createEl("span");
    (0, import_obsidian5.setIcon)(fileIcon, "file-text");
    const fileName = fileHeader.createEl("span");
    const wordCount = await this.wordCounter.getWordCount(file);
    fileName.textContent = `${file.name.replace(/\.md$/, "")}`;
    const deleteButton = fileItem.createEl("button", { cls: "deleteButton" });
    fileItem.createEl("div", { cls: "word-count", text: `${wordCount}` });
    (0, import_obsidian5.setIcon)(deleteButton, "trash");
    deleteButton.title = "\u5220\u9664\u6587\u4EF6";
    deleteButton.addEventListener("click", (e) => {
      e.stopPropagation();
      this.confirmDelete(file);
    });
    fileItem.addEventListener("click", () => {
      this.app.workspace.openLinkText(file.path, "", false);
    });
    fileItem.dataset.path = file.path;
  }
  // 展示大纲的方法
  async displayOutline(container, file) {
    const outline = await this.getOutline(file);
    this.renderOutlineList(container, outline, 1, file);
  }
  // 递归渲染大纲列表的方法
  async renderOutlineList(container, titles, level, file) {
    const listType = level === 1 ? "ul" : "ol";
    const list = container.createEl(listType, { cls: "outline-list" });
    while (titles.length > 0) {
      const title = titles.shift();
      if (title) {
        const [text, nestedTitles] = this.splitTitleAndChildren(title, titles);
        const titleDiv = list.createEl("div", { text });
        titleDiv.className = "outline-title";
        const listItem = list.createEl("li");
        listItem.appendChild(titleDiv);
        listItem.style.paddingLeft = `${10}px`;
        listItem.addEventListener("click", () => this.scrollToTitle(file, title));
        if (nestedTitles.length > 0) {
          this.renderOutlineList(listItem, nestedTitles, level + 1, file);
        }
      }
    }
    container.appendChild(list);
  }
  splitTitleAndChildren(title, remainingTitles) {
    const match = title.match(/^(#+)\s*(.*)/);
    if (match) {
      const headerLevel = match[1].length;
      const text = match[2];
      const nestedTitles = [];
      for (let i = 0; i < remainingTitles.length; i++) {
        const nextTitle = remainingTitles[i];
        const nextMatch = nextTitle.match(/^(#+)\s*(.*)/);
        if (nextMatch) {
          const nextHeaderLevel = nextMatch[1].length;
          if (nextHeaderLevel > headerLevel) {
            nestedTitles.push(nextTitle);
          } else if (nextHeaderLevel <= headerLevel) {
            break;
          }
        }
      }
      remainingTitles.splice(0, nestedTitles.length);
      return [text, nestedTitles];
    } else {
      return [title, []];
    }
  }
  // 定位到文件中的标题位置的方法
  async scrollToTitle(file, title) {
    const fileContent = await this.app.vault.read(file);
    const lines = fileContent.split("\n");
    const titleIndex = lines.findIndex((line) => line.trim() === title);
    if (titleIndex !== -1) {
      const activeLeaf = this.app.workspace.getLeaf();
      if (activeLeaf) {
        const view = activeLeaf.view;
        if (view instanceof import_obsidian5.MarkdownView) {
          const editor = view.editor;
          editor.setCursor({ line: titleIndex, ch: 0 });
          editor.scrollIntoView({ from: { line: titleIndex, ch: 0 }, to: { line: titleIndex, ch: 0 } }, true);
        }
      }
    }
  }
  // 假设的获取文件大纲的方法，需要您根据实际情况实现
  async getOutline(file) {
    const fileContents = await this.app.vault.read(file);
    const lines = fileContents.split("\n");
    const titles = lines.filter((line) => line.startsWith("#")).map((line) => line.trim());
    return titles;
  }
  async updateFile(file) {
    const fileItem = this.containerEl.querySelector(`li[data-path="${file.path}"]`);
    if (fileItem) {
      const fileName = file.name.replace(/\.md$/, "");
      const wordCount = await this.wordCounter.getWordCount(file);
      fileItem.textContent = `${fileName} (${wordCount} words)`;
    }
  }
  async showNewChapterModal(folder) {
    const modal = new NewChapterModal(this.app, folder, this, "\u7AE0\u8282", this.refresh);
    modal.open();
  }
  async showNewItemModal() {
    const rootFolderPath = this.plugin.folderPath + "/\u5C0F\u8BF4\u6587\u7A3F";
    const folder = this.app.vault.getAbstractFileByPath(rootFolderPath);
    if (folder && folder instanceof import_obsidian5.TFolder) {
      const modal = new NewItemModal(this.app, folder, this, this.refresh);
      modal.open();
    } else {
      new import_obsidian5.Notice(`\u6587\u4EF6\u5939\u672A\u53D1\u73B0: ${rootFolderPath}`);
    }
  }
  confirmDelete(fileOrFolder) {
    const modal = new ConfirmDeleteModal(this.app, fileOrFolder, this, this.refresh);
    modal.open();
  }
  async onClose() {
  }
};

// src/view/bookShelfView.ts
var import_obsidian7 = require("obsidian");

// src/model/newBookModal.ts
var import_obsidian6 = require("obsidian");
var NewBookModal = class extends import_obsidian6.Modal {
  constructor(app, folder, view, refreshCallback) {
    super(app);
    this.folder = folder;
    this.view = view;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { cls: "pluginModal", text: "\u65B0\u5EFA\u4E66\u7C4D" });
    const infoForm = contentEl.createDiv({ cls: "info-form" });
    const namelabelEl = infoForm.createEl("div", { cls: "name-label" });
    namelabelEl.createEl("div", { text: "\u4E66\u7C4D\u540D\u79F0", cls: "input-label" });
    const nameInput = new import_obsidian6.TextComponent(namelabelEl);
    nameInput.setPlaceholder("\u5728\u6B64\u8F93\u5165\u4E66\u7C4D\u540D\u79F0");
    const bookTypeLabel = namelabelEl.createEl("div", { text: "\u5C0F\u8BF4\u7C7B\u578B\uFF1A", cls: "option-label" });
    const selectEl = bookTypeLabel.createEl("select", { cls: "book-type-select" });
    selectEl.id = "bookType";
    const novelOption = selectEl.createEl("option", {
      attr: { value: "novel", selected: "selected" }
      // 初始默认选中长篇小说
    });
    novelOption.textContent = "\u957F\u7BC7\u5C0F\u8BF4";
    const shortStoryOption = selectEl.createEl("option", { attr: { value: "short-story" } });
    shortStoryOption.textContent = "\u77ED\u7BC7\u5C0F\u8BF4";
    const desclabelEl = infoForm.createEl("div", { cls: "desc-label" });
    desclabelEl.createEl("div", { text: "\u4E66\u7C4D\u7B80\u4ECB", cls: "input-label" });
    const descInputEl = desclabelEl.createEl("textarea", { cls: "book-description-textarea" });
    descInputEl.placeholder = "\u8BF7\u8F93\u5165\u4E66\u7C4D\u7B80\u4ECB";
    descInputEl.rows = 10;
    descInputEl.style.width = "100%";
    new import_obsidian6.ButtonComponent(contentEl).setButtonText("\u521B\u5EFA").setCta().onClick(async () => {
      const bookName = nameInput.getValue();
      const bookDesc = descInputEl.value;
      let bookType = "novel";
      const selectedType = document.getElementById("bookType");
      bookType = selectedType.value;
      if (bookName.trim() === "") {
        new import_obsidian6.Notice("\u4E66\u7C4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");
        return;
      }
      const bookFolderPath = `${this.folder.path}/${bookName}`;
      const newFolder = await this.app.vault.createFolder(bookFolderPath);
      if (newFolder) {
        await this.app.vault.create(newFolder.path + "/\u4FE1\u606F.md", `---
type: ${bookType}
---
\u540D\u79F0: ${bookName}
\u7B80\u4ECB: ${bookDesc}`);
        if (bookType === "novel") {
          const novelFolder = await this.app.vault.createFolder(newFolder.path + "/\u5C0F\u8BF4\u6587\u7A3F");
          await this.app.vault.create(novelFolder.path + "/\u672A\u547D\u540D\u7AE0\u8282.md", "");
        } else if (bookType === "short-story") {
          await this.app.vault.create(newFolder.path + "/\u5C0F\u8BF4\u6B63\u6587.md", "");
        }
      }
      new import_obsidian6.Notice("\u4E66\u7C4D\u5DF2\u521B\u5EFA");
      this.close();
    });
    new import_obsidian6.ButtonComponent(contentEl).setButtonText("\u53D6\u6D88").onClick(() => {
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/view/bookShelfView.ts
var VIEW_TYPE_BOOKSHELF = "bookshelf-view";
var BookshelfView = class extends import_obsidian7.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.wordCounter = new WordCounter(plugin);
    this.icon = "book";
  }
  getViewType() {
    return VIEW_TYPE_BOOKSHELF;
  }
  getDisplayText() {
    return "Bookshelf";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    const bookList = this.containerEl.createDiv({ cls: "book-list-container" });
    bookList.style.gridTemplateColumns = `repeat(${this.plugin.settings.booksPerRow}, 1fr)`;
    this.toggleFloatingButton();
    await this.refresh();
  }
  toggleFloatingButton() {
    const floatingButton = this.containerEl.createEl("button", { cls: "floating-button" });
    (0, import_obsidian7.setIcon)(floatingButton, "plus");
    floatingButton.title = "\u65B0\u5EFA\u4E66\u7C4D";
    floatingButton.addEventListener("click", () => {
      this.showNewBookModal();
    });
  }
  async refresh() {
    this.containerEl.empty();
    const bookListContainer = this.containerEl.createDiv({ cls: "book-list-container" });
    bookListContainer.style.gridTemplateColumns = `repeat(${this.plugin.settings.booksPerRow}, 1fr)`;
    const rootFolder = "/";
    const folder = this.app.vault.getAbstractFileByPath(rootFolder);
    if (folder instanceof import_obsidian7.TFolder) {
      await this.displayBooks(bookListContainer, folder);
    } else {
      new import_obsidian7.Notice("\u6839\u6587\u4EF6\u5939\u672A\u627E\u5230");
    }
    this.toggleFloatingButton();
  }
  async displayBooks(container, rootFolder) {
    var _a;
    const bookFolders = rootFolder.children.filter((child) => child instanceof import_obsidian7.TFolder);
    for (const folder of bookFolders) {
      const infoFile = folder.children.find((file) => file instanceof import_obsidian7.TFile && file.name === "\u4FE1\u606F.md");
      if (infoFile) {
        try {
          const fileContents = await this.app.vault.read(infoFile);
          const yamlHeader = (_a = fileContents.split("---")[1]) == null ? void 0 : _a.trim();
          const fileYaml = (0, import_obsidian7.parseYaml)(yamlHeader);
          if (fileYaml) {
            const novelFolder = folder.children.find((file) => file instanceof import_obsidian7.TFolder && file.name === "\u5C0F\u8BF4\u6587\u7A3F");
            const storyFile = folder.children.find((file) => file instanceof import_obsidian7.TFile && file.name === "\u5C0F\u8BF4\u6B63\u6587.md");
            if (novelFolder) {
              const totalWordCount = await this.wordCounter.getTotalWordCount(novelFolder);
              this.displayBook(container, folder, fileYaml.type, totalWordCount);
            } else if (storyFile) {
              const totalWordCount = await this.wordCounter.getWordCount(storyFile);
              this.displayBook(container, folder, fileYaml.type, totalWordCount);
            } else {
              new import_obsidian7.Notice(`\u5C0F\u8BF4\u6587\u4EF6\u5939\u672A\u53D1\u73B0 ${folder.name}`);
            }
          }
        } catch (error) {
          new import_obsidian7.Notice("\u89E3\u6790\u4FE1\u606F.md\u6587\u4EF6\u65F6\u51FA\u9519");
        }
      }
    }
  }
  displayBook(container, folder, type, totalWordCount) {
    const bookItem = container.createDiv({ cls: "book-item" });
    bookItem.createEl("div", { cls: "book-title", text: folder.name });
    bookItem.createEl("div", { cls: "book-count", text: `${totalWordCount} \u5B57` });
    bookItem.createEl("div", { cls: "book-type", text: type === "novel" ? "\u957F\u7BC7" : "\u77ED\u7BC7" });
    const deleteButton = bookItem.createEl("div", { text: "\u5220\u9664", cls: "deleteButtonPlus" });
    (0, import_obsidian7.setIcon)(deleteButton, "trash");
    deleteButton.title = "\u5220\u9664\u7075\u611F";
    deleteButton.addEventListener("click", (e) => {
      e.stopPropagation();
      this.confirmDelete(folder);
    });
    bookItem.addEventListener("click", () => {
      this.plugin.setFolderPath(folder.path);
      const novelFolderPath = `${this.plugin.folderPath}/\u5C0F\u8BF4\u6587\u7A3F`;
      const novelFolder = this.app.vault.getAbstractFileByPath(novelFolderPath);
      if (novelFolder instanceof import_obsidian7.TFolder) {
        const latestFile = this.getLatestFile(novelFolder);
        if (latestFile) {
          this.app.workspace.openLinkText(latestFile.path, "", false);
        } else {
          new import_obsidian7.Notice("\u672A\u53D1\u73B0\u6700\u65B0\u6587\u4EF6");
        }
      } else {
        const defaultPath = type === "novel" ? `${this.plugin.folderPath}/\u5C0F\u8BF4\u6587\u7A3F/\u672A\u547D\u540D\u7AE0\u8282.md` : `${this.plugin.folderPath}/\u5C0F\u8BF4\u6B63\u6587.md`;
        this.app.workspace.openLinkText(defaultPath, "", false);
      }
    });
  }
  getLatestFile(folder) {
    let latestFile = null;
    let latestTime = 0;
    const checkFile = (file) => {
      if (file.stat.ctime > latestTime) {
        latestTime = file.stat.ctime;
        latestFile = file;
      }
    };
    const traverseFolder = (folder2) => {
      folder2.children.forEach((child) => {
        if (child instanceof import_obsidian7.TFile) {
          checkFile(child);
        } else if (child instanceof import_obsidian7.TFolder) {
          traverseFolder(child);
        }
      });
    };
    traverseFolder(folder);
    return latestFile;
  }
  confirmDelete(fileOrFolder) {
    const modal = new ConfirmDeleteModal(this.app, fileOrFolder, this, this.refresh.bind(this));
    modal.open();
  }
  async showNewBookModal() {
    const rootFolderPath = "/";
    const folder = this.app.vault.getAbstractFileByPath(rootFolderPath);
    if (folder instanceof import_obsidian7.TFolder) {
      const modal = new NewBookModal(this.app, folder, this, this.refresh.bind(this));
      modal.open();
    } else {
      new import_obsidian7.Notice("\u6839\u6587\u4EF6\u5939\u672A\u627E\u5230");
    }
  }
  async onClose() {
    this.plugin.folderPath = "";
  }
};

// src/view/bookSettingView.ts
var import_obsidian9 = require("obsidian");

// src/model/InspirationModal.ts
var import_obsidian8 = require("obsidian");
var NewInspirationModal = class extends import_obsidian8.Modal {
  constructor(app, folder, view, refreshCallback) {
    super(app);
    this.folder = folder;
    this.view = view;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { cls: "pluginModal", text: "\u6DFB\u52A0\u7075\u611F" });
    const input = new import_obsidian8.TextComponent(contentEl);
    input.setPlaceholder("\u7075\u611F\u6807\u9898");
    const descInputEl = contentEl.createEl("textarea", { cls: "inspiration-textarea" });
    descInputEl.placeholder = "\u7075\u611F\u8BE6\u7EC6\u5185\u5BB9";
    descInputEl.rows = 10;
    descInputEl.style.width = "100%";
    new import_obsidian8.ButtonComponent(contentEl).setButtonText("\u521B\u5EFA").setCta().onClick(async () => {
      const fileName = input.getValue();
      const fileContent = descInputEl.value;
      if (!fileName) {
        new import_obsidian8.Notice("\u7075\u611F\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A");
        return;
      }
      const filePath = `${this.folder.path}/${fileName}.md`;
      await this.app.vault.create(filePath, fileContent);
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/view/bookSettingView.ts
var VIEW_TYPE_BOOK_SETTING = "book-setting";
var BookSettingView = class extends import_obsidian9.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.currentTab = "\u5927\u7EB2";
    this.currentDisplayedFile = null;
    this.plugin = plugin;
    this.icon = "book-text";
  }
  getViewType() {
    return VIEW_TYPE_BOOK_SETTING;
  }
  getDisplayText() {
    return "\u4E66\u7C4D\u8BBE\u5B9A";
  }
  async onOpen() {
    this.containerEl.empty();
    this.contentContainer = this.containerEl.createDiv({ cls: "setting-content" });
    await this.refresh();
  }
  async refresh() {
    const previousTab = this.currentTab;
    this.containerEl.empty();
    if (!this.plugin.folderPath) {
      await this.showInspiration();
    } else {
      const infoFilePath = `${this.plugin.folderPath}/\u4FE1\u606F.md`;
      const file = this.app.vault.getAbstractFileByPath(infoFilePath);
      if (file instanceof import_obsidian9.TFile) {
        try {
          const yamlHeader = await this.getFileYaml(infoFilePath);
          if ((yamlHeader == null ? void 0 : yamlHeader.type) === "short-story") {
            await this.shortStoryOutline();
          } else {
            this.createSetView();
            this.currentTab = previousTab;
            await this.showViewContent(this.currentTab);
            if (this.currentDisplayedFile) {
              await this.renderFileContent(this.currentDisplayedFile);
            }
          }
        } catch (error) {
          new import_obsidian9.Notice("\u89E3\u6790\u4FE1\u606F.md\u6587\u4EF6\u65F6\u51FA\u9519");
        }
      } else {
        new import_obsidian9.Notice("\u672A\u627E\u5230\u4FE1\u606F.md\u6587\u4EF6\u6216\u6587\u4EF6\u8DEF\u5F84\u4E0D\u6B63\u786E");
      }
    }
  }
  async getFileYaml(filePath) {
    var _a;
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian9.TFile) {
      const fileContents = await this.app.vault.read(file);
      const yamlHeader = (_a = fileContents.split("---")[1]) == null ? void 0 : _a.trim();
      return yamlHeader ? (0, import_obsidian9.parseYaml)(yamlHeader) : null;
    } else {
      new import_obsidian9.Notice("\u6587\u4EF6\u672A\u627E\u5230\u6216\u6587\u4EF6\u8DEF\u5F84\u4E0D\u6B63\u786E");
      return null;
    }
  }
  async shortStoryOutline() {
    const outlineContent = this.containerEl.createEl("div", { cls: "outline-container" });
    const shortStoryOutlinePath = `${this.plugin.folderPath}/\u5927\u7EB2.md`;
    const shortStoryOutline = this.app.vault.getAbstractFileByPath(shortStoryOutlinePath);
    const setContentContainerTitle = outlineContent.createEl("h2", { text: "\u5927\u7EB2", cls: "set-content-title" });
    const modifyButton = setContentContainerTitle.createEl("div", { cls: "modify-button" });
    (0, import_obsidian9.setIcon)(modifyButton, "pencil");
    modifyButton.addEventListener("click", () => {
      this.app.workspace.openLinkText(shortStoryOutlinePath, "", false);
    });
    if (shortStoryOutline instanceof import_obsidian9.TFile) {
      const fileContent = await this.app.vault.read(shortStoryOutline);
      const shortStoryToc = outlineContent.createDiv({ cls: "outline-content" });
      shortStoryToc.empty();
      import_obsidian9.MarkdownRenderer.render(this.app, fileContent, shortStoryToc, shortStoryOutlinePath, this);
    } else {
      new import_obsidian9.Notice("\u5927\u7EB2\u6587\u4EF6\u672A\u627E\u5230");
    }
  }
  async showInspiration() {
    const inspirationPath = "@\u9644\u4EF6/\u7075\u611F";
    const folder = this.app.vault.getAbstractFileByPath(inspirationPath);
    const inspirationTitle = this.containerEl.createEl("h2", { cls: "view-title" });
    inspirationTitle.createEl("span", { text: "\u7075\u611F" });
    const inspirationIcon = inspirationTitle.createEl("span");
    (0, import_obsidian9.setIcon)(inspirationIcon, "plus");
    inspirationIcon.title = "\u6DFB\u52A0\u7075\u611F";
    inspirationIcon.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showNewInspirationModal();
    });
    if (folder instanceof import_obsidian9.TFolder) {
      for (const child of folder.children) {
        if (child instanceof import_obsidian9.TFile) {
          await this.displayInspirationItem(child);
        }
      }
    } else {
      this.contentContainer.createEl("div", { cls: "hint-info", text: "\u672A\u627E\u5230\u7075\u611F\u6587\u4EF6\u5939\u3002" });
    }
  }
  async displayInspirationItem(child) {
    const fileItem = this.containerEl.createEl("div", { cls: "inspiration-item" });
    fileItem.createEl("div", { text: child.name.replace(/\.md$/, ""), cls: "file-title" });
    const deleteButton = fileItem.createEl("div", { cls: "deleteButtonPlus" });
    (0, import_obsidian9.setIcon)(deleteButton, "trash");
    deleteButton.title = "\u5220\u9664\u7075\u611F";
    const fileContent = await this.app.vault.read(child);
    const snippet = fileContent.split("\n").slice(0, 5).join("\n");
    fileItem.createEl("p", { text: snippet });
    fileItem.addEventListener("click", () => {
      this.app.workspace.openLinkText(child.path, "", false);
    });
    deleteButton.addEventListener("click", (e) => {
      e.stopPropagation();
      this.confirmDelete(child);
    });
  }
  async showNewInspirationModal() {
    const inspirationPath = "@\u9644\u4EF6/\u7075\u611F";
    let folder = this.app.vault.getAbstractFileByPath(inspirationPath);
    if (!(folder instanceof import_obsidian9.TFolder)) {
      try {
        await this.app.vault.createFolder(inspirationPath);
        folder = this.app.vault.getAbstractFileByPath(inspirationPath);
      } catch (error) {
        new import_obsidian9.Notice("\u521B\u5EFA\u7075\u611F\u6587\u4EF6\u5939\u65F6\u51FA\u9519");
        return;
      }
    }
    if (folder instanceof import_obsidian9.TFolder) {
      const modal = new NewInspirationModal(this.app, folder, this, this.refresh.bind(this));
      modal.open();
    } else {
      new import_obsidian9.Notice("\u6587\u4EF6\u5939\u672A\u627E\u5230");
    }
  }
  async showViewContent(tabName) {
    this.contentContainer.empty();
    const settingFolderPath = `${this.plugin.folderPath}/\u8BBE\u5B9A/${tabName}`;
    const settingFolder = this.app.vault.getAbstractFileByPath(settingFolderPath);
    if (settingFolder instanceof import_obsidian9.TFolder) {
      this.displayItems(this.contentContainer, settingFolder);
    } else {
      this.contentContainer.createEl("div", { cls: "hint-info", text: `\u672A\u627E\u5230${tabName}\u6587\u4EF6\u5939` });
    }
  }
  createSetView() {
    const setMainContainer = this.containerEl.createDiv({ cls: "set-main-container" });
    this.setContentContainer = setMainContainer.createDiv({ cls: "item-container" });
    const listContainer = setMainContainer.createDiv({ cls: "list-container" });
    const listHeaderContainer = listContainer.createDiv({ cls: "list-container-header" });
    const categoryNameDiv = listHeaderContainer.createEl("div", { cls: "category-input" });
    const inputCategoryName = categoryNameDiv.createEl("input", { placeholder: "\u5206\u7C7B\u540D\u79F0" });
    const listHeaderIcon = listHeaderContainer.createEl("div", { cls: "list-header-icon" });
    (0, import_obsidian9.setIcon)(listHeaderIcon, "plus");
    const listContentContainer = listContainer.createDiv({ cls: "list-container-main" });
    const tabsContainer = setMainContainer.createDiv({ cls: "tabs-container" });
    const tabsTop = tabsContainer.createDiv({ cls: "tabs-top" });
    const tabs = ["\u5927\u7EB2", "\u89D2\u8272", "\u8BBE\u5B9A", "\u7075\u611F"];
    const tabsIcon = ["list", "user-cog", "file-cog", "lightbulb"];
    const tabsArray = [];
    const updateAndDisplayList = async (tabName) => {
      this.currentTab = tabName;
      const currentSettingFolderPath = `${this.plugin.folderPath}/\u8BBE\u5B9A/${tabName}`;
      const currentSettingFolder = this.app.vault.getAbstractFileByPath(currentSettingFolderPath);
      listContentContainer.empty();
      if (currentSettingFolder instanceof import_obsidian9.TFolder) {
        this.displayItems(listContentContainer, currentSettingFolder);
      } else {
        listContentContainer.createEl("div", { cls: "hint-info", text: `${tabName}\u4E0B\u65E0\u6587\u4EF6` });
      }
    };
    listHeaderIcon.addEventListener("click", async () => {
      const newCategoryName = inputCategoryName.value.trim();
      if (newCategoryName) {
        const baseSettingFolderPath = `${this.plugin.folderPath}/\u8BBE\u5B9A`;
        const currentSettingFolderPath = `${baseSettingFolderPath}/${this.currentTab}`;
        const newCategoryPath = `${currentSettingFolderPath}/${newCategoryName}`;
        await createFolderIfNotExists.call(this, baseSettingFolderPath);
        await createFolderIfNotExists.call(this, currentSettingFolderPath);
        await this.app.vault.createFolder(newCategoryPath);
        updateAndDisplayList(this.currentTab);
      } else {
        new import_obsidian9.Notice("\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0");
      }
    });
    async function createFolderIfNotExists(path) {
      const folder = this.app.vault.getAbstractFileByPath(path);
      if (!(folder instanceof import_obsidian9.TFolder)) {
        const parentPath = path.substring(0, path.lastIndexOf("/"));
        await createFolderIfNotExists.call(this, parentPath);
        await this.app.vault.createFolder(path);
      }
    }
    updateAndDisplayList(this.currentTab);
    tabs.forEach((tabName) => {
      const tab = tabsTop.createEl("div", { cls: "tab-button" });
      tabsArray.push(tab);
      tab.addEventListener("click", async () => {
        await updateAndDisplayList(tabName);
        tabsArray.forEach((t) => t.removeClass("selected"));
        tab.addClass("selected");
        await this.showViewContent(tabName);
      });
      if (tabName === this.currentTab) {
        tab.addClass("selected");
      }
      const tabIcon = tab.createDiv();
      tab.createDiv({ cls: "tab-name", text: tabName });
      (0, import_obsidian9.setIcon)(tabIcon, tabsIcon[tabs.indexOf(tabName)]);
      tab.title = tabName;
    });
  }
  displayItems(container, folder) {
    folder.children.forEach((child) => {
      const childContainer = container.createDiv({ cls: "folder-item" });
      if (child instanceof import_obsidian9.TFile) {
        this.displayFile(childContainer, child);
      } else if (child instanceof import_obsidian9.TFolder) {
        this.displayFolder(childContainer, child);
      }
    });
  }
  displayFolder(container, folder) {
    const folderItem = container.createDiv({ cls: "folder-item" });
    const folderHeader = folderItem.createEl("div", { cls: "folder-header" });
    const folderName = folderHeader.createEl("div", { cls: "folder-name" });
    const folderIcon = folderName.createEl("span");
    (0, import_obsidian9.setIcon)(folderIcon, "folder-open");
    folderName.createSpan({ text: folder.name });
    const tocButton = folderHeader.createEl("div", { cls: "tocButton" });
    const addButton = tocButton.createEl("button");
    (0, import_obsidian9.setIcon)(addButton, "plus");
    addButton.title = "\u6DFB\u52A0";
    addButton.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showNewChapterModal(folder);
    });
    const deleteButton = tocButton.createEl("button");
    (0, import_obsidian9.setIcon)(deleteButton, "trash");
    deleteButton.title = "\u5220\u9664\u5206\u7C7B";
    deleteButton.addEventListener("click", (e) => {
      e.stopPropagation();
      this.confirmDelete(folder);
    });
    const fileList = folderItem.createEl("ul", { cls: "file-list" });
    fileList.style.display = "block";
    folderHeader.addEventListener("click", () => {
      fileList.style.display = fileList.style.display === "none" ? "block" : "none";
      (0, import_obsidian9.setIcon)(folderIcon, fileList.style.display === "none" ? "folder-minus" : "folder-open");
    });
    const sortedChildren = folder.children.sort((a, b) => {
      if (a instanceof import_obsidian9.TFile && b instanceof import_obsidian9.TFile) {
        return a.stat.ctime - b.stat.ctime;
      } else if (a instanceof import_obsidian9.TFolder && b instanceof import_obsidian9.TFolder) {
        return a.name.localeCompare(b.name);
      } else if (a instanceof import_obsidian9.TFile) {
        return 1;
      } else {
        return -1;
      }
    });
    sortedChildren.forEach((file) => {
      if (file instanceof import_obsidian9.TFile) {
        this.displayFile(fileList, file);
      } else if (file instanceof import_obsidian9.TFolder) {
        this.displayFolder(fileList.createEl("li"), file);
      }
    });
  }
  async displayFile(container, file) {
    const fileItem = container.createEl("li", { cls: "chapter-title" });
    const fileHeader = fileItem.createEl("div", { cls: "file-header" });
    const fileIcon = fileHeader.createEl("span");
    (0, import_obsidian9.setIcon)(fileIcon, "file-text");
    const fileName = fileHeader.createEl("span");
    fileName.textContent = file.name.replace(/\.md$/, "");
    const deleteButton = fileItem.createEl("button", { cls: "deleteButton" });
    (0, import_obsidian9.setIcon)(deleteButton, "trash");
    deleteButton.title = "\u5220\u9664\u6587\u4EF6";
    deleteButton.addEventListener("click", (e) => {
      e.stopPropagation();
      this.confirmDelete(file);
    });
    fileName.addEventListener("click", async () => {
      this.currentDisplayedFile = file;
      await this.renderFileContent(file);
    });
    fileItem.dataset.path = file.path;
  }
  async renderFileContent(file) {
    const fileContent = await this.app.vault.read(file);
    const setContentContainer = this.setContentContainer;
    setContentContainer.empty();
    const setContentContainerTitle = setContentContainer.createEl("h2", { cls: "set-content-title", text: `${this.currentTab}\u2014\u2014${file.name.replace(/\.md$/, "")}` });
    const setContentContainerMain = setContentContainer.createEl("div", { cls: "set-content-container-main" });
    import_obsidian9.MarkdownRenderer.render(this.app, fileContent, setContentContainerMain, file.path, this);
    const modifyButton = setContentContainerTitle.createEl("div", { cls: "modify-button" });
    (0, import_obsidian9.setIcon)(modifyButton, "pencil");
    modifyButton.addEventListener("click", () => {
      this.app.workspace.openLinkText(file.path, "", false);
    });
  }
  async showNewChapterModal(folder) {
    const modal = new NewChapterModal(this.app, folder, this, "", this.refresh.bind(this));
    modal.open();
  }
  async showNewItemModal(folderPath) {
    const folder = this.app.vault.getAbstractFileByPath(folderPath);
    if (folder instanceof import_obsidian9.TFolder) {
      const modal = new NewItemModal(this.app, folder, this, this.refresh.bind(this));
      modal.open();
    } else {
      new import_obsidian9.Notice(`\u6587\u4EF6\u5939\u672A\u53D1\u73B0: ${folderPath}`);
    }
  }
  confirmDelete(fileOrFolder) {
    const modal = new ConfirmDeleteModal(this.app, fileOrFolder, this, this.refresh.bind(this));
    modal.open();
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  name: "",
  picturePath: "",
  countPunctuation: false,
  booksPerRow: 5
};
var MyPluginSettingTab = class extends import_obsidian10.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "\u63D2\u4EF6\u8BBE\u7F6E" });
    new import_obsidian10.Setting(containerEl).setName("\u59D3\u540D").addText((text) => {
      text.setValue(this.plugin.settings.name).onChange(async (value) => {
        this.plugin.settings.name = value;
        await this.plugin.saveSettings();
        this.plugin.refreshTocView();
      });
    });
    new import_obsidian10.Setting(containerEl).setName("\u5934\u50CF\u56FE\u7247\u8DEF\u5F84").addText((text) => {
      text.setValue(this.plugin.settings.picturePath).onChange(async (value) => {
        this.plugin.settings.picturePath = value;
        await this.plugin.saveSettings();
        this.plugin.refreshTocView();
      });
    });
    new import_obsidian10.Setting(containerEl).setName("\u6807\u70B9\u7B26\u53F7\u8BA1\u6570").setDesc("\u6807\u70B9\u7B26\u53F7\u8BA1\u7B97\u4E3A\u4E00\u4E2A\u5B57\u7B26").addToggle((toggle) => toggle.setValue(this.plugin.settings.countPunctuation).onChange(async (value) => {
      var _a;
      this.plugin.settings.countPunctuation = value;
      await this.plugin.saveSettings();
      const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE_FILE_LIST)[0]) == null ? void 0 : _a.view;
      if (view instanceof TocView) {
        view.refresh();
      }
    }));
    new import_obsidian10.Setting(containerEl).setName("\u6BCF\u884C\u663E\u793A\u4E66\u7C4D\u6570\u91CF").addText((text) => {
      text.setValue(this.plugin.settings.booksPerRow.toString()).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num) && num > 0) {
          this.plugin.settings.booksPerRow = num;
          await this.plugin.saveSettings();
          this.plugin.refreshBookshelfView();
        } else {
          new import_obsidian10.Notice("\u8BF7\u8F93\u5165\u4E00\u4E2A\u6709\u6548\u7684\u6B63\u6574\u6570");
        }
      });
    });
  }
};
var MyPlugin = class extends import_obsidian10.Plugin {
  async onload() {
    await this.loadSettings();
    this.addRibbonIcon("folder-open", "\u76EE\u5F55", () => {
      this.activateView(VIEW_TYPE_FILE_LIST);
    });
    this.addRibbonIcon("book", "\u4E66\u67B6", () => {
      this.activateView(VIEW_TYPE_BOOKSHELF);
    });
    this.addRibbonIcon("book-text", "\u8BBE\u5B9A", () => {
      this.activateView(VIEW_TYPE_BOOK_SETTING);
    });
    this.registerView(
      VIEW_TYPE_FILE_LIST,
      (leaf) => new TocView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_BOOKSHELF,
      (leaf) => new BookshelfView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_BOOK_SETTING,
      (leaf) => new BookSettingView(leaf, this)
    );
    this.addSettingTab(new MyPluginSettingTab(this.app, this));
    this.registerEvent(this.app.vault.on("create", this.handleFileChange.bind(this)));
    this.registerEvent(this.app.vault.on("delete", this.handleFileChange.bind(this)));
    this.folderPath = "";
  }
  handleFileChange(file) {
    var _a, _b, _c;
    const tocView = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE_FILE_LIST)[0]) == null ? void 0 : _a.view;
    if (tocView instanceof TocView) {
      tocView.refresh();
    }
    const bookshelfView = (_b = this.app.workspace.getLeavesOfType(VIEW_TYPE_BOOKSHELF)[0]) == null ? void 0 : _b.view;
    if (bookshelfView instanceof BookshelfView) {
      bookshelfView.refresh();
    }
    const booksettingView = (_c = this.app.workspace.getLeavesOfType(VIEW_TYPE_BOOK_SETTING)[0]) == null ? void 0 : _c.view;
    if (booksettingView instanceof BookSettingView) {
      booksettingView.refresh();
    }
  }
  async activateView(viewType) {
    this.app.workspace.detachLeavesOfType(viewType);
    let centerLeaf = this.app.workspace.getMostRecentLeaf();
    if (viewType === VIEW_TYPE_FILE_LIST) {
      centerLeaf = this.app.workspace.getLeftLeaf(false);
    } else if (viewType === VIEW_TYPE_BOOK_SETTING) {
      centerLeaf = this.app.workspace.getRightLeaf(false);
    }
    if (centerLeaf) {
      await centerLeaf.setViewState({
        type: viewType,
        active: true,
        state: { icon: viewType === VIEW_TYPE_FILE_LIST ? "folder-open" : "book" }
      });
      this.app.workspace.revealLeaf(
        this.app.workspace.getLeavesOfType(viewType)[0]
      );
    }
  }
  async setFolderPath(path) {
    this.folderPath = path;
    await this.saveSettings();
    this.refreshTocView();
    this.refreshBookSettingView();
    this.refreshBookshelfView();
  }
  refreshTocView() {
    var _a;
    const tocView = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE_FILE_LIST)[0]) == null ? void 0 : _a.view;
    if (tocView) {
      tocView.updateTitle();
      tocView.refresh();
    }
  }
  refreshBookSettingView() {
    var _a;
    const bookSettingView = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE_BOOK_SETTING)[0]) == null ? void 0 : _a.view;
    if (bookSettingView) {
      bookSettingView.refresh();
    }
  }
  refreshBookshelfView() {
    var _a;
    const bookshelfView = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE_BOOKSHELF)[0]) == null ? void 0 : _a.view;
    if (bookshelfView) {
      bookshelfView.refresh();
    }
  }
  onunload() {
    this.app.workspace.detachLeavesOfType(VIEW_TYPE_FILE_LIST);
    this.app.workspace.detachLeavesOfType(VIEW_TYPE_BOOKSHELF);
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3ZpZXcvdG9jVmlldy50cyIsICJzcmMvaGVscGVyL1dvcmRDb3VudC50cyIsICJzcmMvbW9kZWwvZGVsZXRlTW9kYWwudHMiLCAic3JjL21vZGVsL25ld0NoYXB0ZXJNb2RhbC50cyIsICJzcmMvbW9kZWwvbmV3SXRlbU1vZGFsLnRzIiwgInNyYy92aWV3L2Jvb2tTaGVsZlZpZXcudHMiLCAic3JjL21vZGVsL25ld0Jvb2tNb2RhbC50cyIsICJzcmMvdmlldy9ib29rU2V0dGluZ1ZpZXcudHMiLCAic3JjL21vZGVsL0luc3BpcmF0aW9uTW9kYWwudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBXb3Jrc3BhY2VMZWFmLCBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUb2NWaWV3LCBWSUVXX1RZUEVfRklMRV9MSVNUIH0gZnJvbSAnLi92aWV3L3RvY1ZpZXcnO1xyXG5pbXBvcnQgeyBCb29rc2hlbGZWaWV3LCBWSUVXX1RZUEVfQk9PS1NIRUxGIH0gZnJvbSAnLi92aWV3L2Jvb2tTaGVsZlZpZXcnO1xyXG5pbXBvcnQgeyBCb29rU2V0dGluZ1ZpZXcsIFZJRVdfVFlQRV9CT09LX1NFVFRJTkcgfSBmcm9tICcuL3ZpZXcvYm9va1NldHRpbmdWaWV3JztcclxuXHJcbi8vIFx1NjNEMlx1NEVGNlx1OEJCRVx1N0Y2RVx1NzY4NFx1NjNBNVx1NTNFM1xyXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBwaWN0dXJlUGF0aDogc3RyaW5nOyAvLyBcdTY1QjBcdTU4OUVcdTU2RkVcdTcyNDdcdThERUZcdTVGODRcdThCQkVcdTdGNkVcdTk4NzlcclxuICAgIGNvdW50UHVuY3R1YXRpb246IGJvb2xlYW47XHJcbiAgICBib29rc1BlclJvdzogbnVtYmVyO1xyXG59XHJcblxyXG4vLyBcdTlFRDhcdThCQTRcdThCQkVcdTdGNkVcclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTXlQbHVnaW5TZXR0aW5ncyA9IHtcclxuICAgIG5hbWU6ICcnLFxyXG4gICAgcGljdHVyZVBhdGg6ICcnLFxyXG4gICAgY291bnRQdW5jdHVhdGlvbjogZmFsc2UsXHJcbiAgICBib29rc1BlclJvdzogNSxcclxufVxyXG5cclxuLy8gXHU2M0QyXHU0RUY2XHU4QkJFXHU3RjZFXHU5NzYyXHU2NzdGXHJcbmNsYXNzIE15UGx1Z2luU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG4gICAgcGx1Z2luOiBNeVBsdWdpbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1NjNEMlx1NEVGNlx1OEJCRVx1N0Y2RScgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU1OUQzXHU1NDBEJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5hbWUpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWZyZXNoVG9jVmlldygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NTkzNFx1NTBDRlx1NTZGRVx1NzI0N1x1OERFRlx1NUY4NCcpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5waWN0dXJlUGF0aCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucGljdHVyZVBhdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWZyZXNoVG9jVmlldygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NjgwN1x1NzBCOVx1N0IyNlx1NTNGN1x1OEJBMVx1NjU3MCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTY4MDdcdTcwQjlcdTdCMjZcdTUzRjdcdThCQTFcdTdCOTdcdTRFM0FcdTRFMDBcdTRFMkFcdTVCNTdcdTdCMjYnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb3VudFB1bmN0dWF0aW9uKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvdW50UHVuY3R1YXRpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfRklMRV9MSVNUKVswXT8udmlldztcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmlldyBpbnN0YW5jZW9mIFRvY1ZpZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdcdTZCQ0ZcdTg4NENcdTY2M0VcdTc5M0FcdTRFNjZcdTdDNERcdTY1NzBcdTkxQ0YnKVxyXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xyXG4gICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tzUGVyUm93LnRvU3RyaW5nKCkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihudW0pICYmIG51bSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rc1BlclJvdyA9IG51bTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTU3MjhcdThCQkVcdTdGNkVcdTRGRERcdTVCNThcdTU0MEVcdTdBQ0JcdTUzNzNcdTUyMzdcdTY1QjBcdTRFNjZcdTY3QjZcdTg5QzZcdTU2RkVcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWZyZXNoQm9va3NoZWxmVmlldygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRjdcdThGOTNcdTUxNjVcdTRFMDBcdTRFMkFcdTY3MDlcdTY1NDhcdTc2ODRcdTZCNjNcdTY1NzRcdTY1NzAnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU0RTNCXHU2M0QyXHU0RUY2XHU3QzdCXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzO1xyXG4gICAgZm9sZGVyUGF0aDogc3RyaW5nO1xyXG5cclxuICAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2ZvbGRlci1vcGVuJywgJ1x1NzZFRVx1NUY1NScsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZVZpZXcoVklFV19UWVBFX0ZJTEVfTElTVCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignYm9vaycsICdcdTRFNjZcdTY3QjYnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KFZJRVdfVFlQRV9CT09LU0hFTEYpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2Jvb2stdGV4dCcsICdcdThCQkVcdTVCOUEnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KFZJRVdfVFlQRV9CT09LX1NFVFRJTkcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcclxuICAgICAgICAgICAgVklFV19UWVBFX0ZJTEVfTElTVCxcclxuICAgICAgICAgICAgKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IG5ldyBUb2NWaWV3KGxlYWYsIHRoaXMpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXHJcbiAgICAgICAgICAgIFZJRVdfVFlQRV9CT09LU0hFTEYsXHJcbiAgICAgICAgICAgIChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiBuZXcgQm9va3NoZWxmVmlldyhsZWFmLCB0aGlzKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxyXG4gICAgICAgICAgICBWSUVXX1RZUEVfQk9PS19TRVRUSU5HLFxyXG4gICAgICAgICAgICAobGVhZjogV29ya3NwYWNlTGVhZikgPT4gbmV3IEJvb2tTZXR0aW5nVmlldyhsZWFmLCB0aGlzKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTXlQbHVnaW5TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbignY3JlYXRlJywgdGhpcy5oYW5kbGVGaWxlQ2hhbmdlLmJpbmQodGhpcykpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsIHRoaXMuaGFuZGxlRmlsZUNoYW5nZS5iaW5kKHRoaXMpKSk7XHJcblxyXG4gICAgICAgIHRoaXMuZm9sZGVyUGF0aCA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUZpbGVDaGFuZ2UoZmlsZTogVEZpbGUpIHtcclxuICAgICAgICBjb25zdCB0b2NWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfRklMRV9MSVNUKVswXT8udmlldztcclxuICAgICAgICBpZiAodG9jVmlldyBpbnN0YW5jZW9mIFRvY1ZpZXcpIHtcclxuICAgICAgICAgICAgdG9jVmlldy5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBib29rc2hlbGZWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQk9PS1NIRUxGKVswXT8udmlldztcclxuICAgICAgICBpZiAoYm9va3NoZWxmVmlldyBpbnN0YW5jZW9mIEJvb2tzaGVsZlZpZXcpIHtcclxuICAgICAgICAgICAgYm9va3NoZWxmVmlldy5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBib29rc2V0dGluZ1ZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9CT09LX1NFVFRJTkcpWzBdPy52aWV3O1xyXG4gICAgICAgIGlmIChib29rc2V0dGluZ1ZpZXcgaW5zdGFuY2VvZiBCb29rU2V0dGluZ1ZpZXcpIHtcclxuICAgICAgICAgICAgYm9va3NldHRpbmdWaWV3LnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYWN0aXZhdGVWaWV3KHZpZXdUeXBlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKHZpZXdUeXBlKTtcclxuICAgICAgICBsZXQgY2VudGVyTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRNb3N0UmVjZW50TGVhZigpO1xyXG4gICAgICAgIGlmICh2aWV3VHlwZSA9PT0gVklFV19UWVBFX0ZJTEVfTElTVCkge1xyXG4gICAgICAgICAgICBjZW50ZXJMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlZnRMZWFmKGZhbHNlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHZpZXdUeXBlID09PSBWSUVXX1RZUEVfQk9PS19TRVRUSU5HKSB7XHJcbiAgICAgICAgICAgIGNlbnRlckxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNlbnRlckxlYWYpIHtcclxuICAgICAgICAgICAgYXdhaXQgY2VudGVyTGVhZi5zZXRWaWV3U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogdmlld1R5cGUsXHJcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzdGF0ZTogeyBpY29uOiB2aWV3VHlwZSA9PT0gVklFV19UWVBFX0ZJTEVfTElTVCA/ICdmb2xkZXItb3BlbicgOiAnYm9vaycgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSh2aWV3VHlwZSlbMF1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2V0Rm9sZGVyUGF0aChwYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmZvbGRlclBhdGggPSBwYXRoO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9jVmlldygpO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaEJvb2tTZXR0aW5nVmlldygpO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaEJvb2tzaGVsZlZpZXcoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoVG9jVmlldygpIHtcclxuICAgICAgICBjb25zdCB0b2NWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfRklMRV9MSVNUKVswXT8udmlldyBhcyBUb2NWaWV3O1xyXG4gICAgICAgIGlmICh0b2NWaWV3KSB7XHJcbiAgICAgICAgICAgIHRvY1ZpZXcudXBkYXRlVGl0bGUoKTtcclxuICAgICAgICAgICAgdG9jVmlldy5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2hCb29rU2V0dGluZ1ZpZXcoKSB7XHJcbiAgICAgICAgY29uc3QgYm9va1NldHRpbmdWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQk9PS19TRVRUSU5HKVswXT8udmlldyBhcyBCb29rU2V0dGluZ1ZpZXc7XHJcbiAgICAgICAgaWYgKGJvb2tTZXR0aW5nVmlldykge1xyXG4gICAgICAgICAgICBib29rU2V0dGluZ1ZpZXcucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoQm9va3NoZWxmVmlldygpIHtcclxuICAgICAgICBjb25zdCBib29rc2hlbGZWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQk9PS1NIRUxGKVswXT8udmlldyBhcyBCb29rc2hlbGZWaWV3O1xyXG4gICAgICAgIGlmIChib29rc2hlbGZWaWV3KSB7XHJcbiAgICAgICAgICAgIGJvb2tzaGVsZlZpZXcucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbnVubG9hZCgpIHtcclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9GSUxFX0xJU1QpO1xyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0JPT0tTSEVMRik7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZvbGRlciwgVEZpbGUsIE5vdGljZSwgc2V0SWNvbiwgTWFya2Rvd25WaWV3fSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBNeVBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgV29yZENvdW50ZXIgfSBmcm9tICcuLi9oZWxwZXIvV29yZENvdW50JztcclxuaW1wb3J0IHsgQ29uZmlybURlbGV0ZU1vZGFsIH0gZnJvbSAnLi4vbW9kZWwvZGVsZXRlTW9kYWwnO1xyXG5pbXBvcnQgeyBOZXdDaGFwdGVyTW9kYWwgfSBmcm9tICdzcmMvbW9kZWwvbmV3Q2hhcHRlck1vZGFsJztcclxuaW1wb3J0IHsgTmV3SXRlbU1vZGFsIH0gZnJvbSAnc3JjL21vZGVsL25ld0l0ZW1Nb2RhbCc7XHJcblxyXG5leHBvcnQgY29uc3QgVklFV19UWVBFX0ZJTEVfTElTVCA9ICdmaWxlLWxpc3Qtdmlldyc7XHJcbmV4cG9ydCBjb25zdCBORVdfSVRFTV9NT0RBTCA9ICduZXctaXRlbS1tb2RhbCc7XHJcblxyXG4vLyBcdTc2RUVcdTVGNTVcdTg5QzZcdTU2RkVcclxuZXhwb3J0IGNsYXNzIFRvY1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XHJcbiAgICBwbHVnaW46IE15UGx1Z2luO1xyXG4gICAgd29yZENvdW50ZXI6IFdvcmRDb3VudGVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihsZWFmKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLndvcmRDb3VudGVyID0gbmV3IFdvcmRDb3VudGVyKHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5pY29uID0gJ2xpc3QnO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFZJRVdfVFlQRV9GSUxFX0xJU1Q7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ0ZpbGUgTGlzdCc7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XHJcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gY29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJycgfSk7XHJcbiAgICAgICAgdGl0bGUuY2xhc3NOYW1lID0gJ3ZpZXctdGl0bGUnO1xyXG4gICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTZENkVcdTUyQThcdTYzMDlcdTk0QUVcdTVFNzZcdTlFRDhcdThCQTRcdTk2OTBcdTg1Q0ZcclxuICAgICAgICBjb25zdCBmbG9hdGluZ0J1dHRvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICBjbHM6ICdmbG9hdGluZy1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2V0SWNvbihmbG9hdGluZ0J1dHRvbiwgJ3BsdXMnKTtcclxuICAgICAgICBmbG9hdGluZ0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIGZsb2F0aW5nQnV0dG9uLnRpdGxlID0gJ1x1NjVCMFx1NUVGQVx1N0FFMFx1ODI4Mi9cdTUzNzcnO1xyXG4gICAgICAgIGZsb2F0aW5nQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dOZXdJdGVtTW9kYWwoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU2RDZFXHU1MkE4XHU2MzA5XHU5NEFFXHU3Njg0XHU2NjNFXHU3OTNBXHJcbiAgICB0b2dnbGVGbG9hdGluZ0J1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBmbG9hdGluZ0J1dHRvbiA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLmZsb2F0aW5nLWJ1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIGlmIChmbG9hdGluZ0J1dHRvbikge1xyXG4gICAgICAgICAgICBmbG9hdGluZ0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gdGhpcy5wbHVnaW4uZm9sZGVyUGF0aCAhPT0gXCJcIiA/ICdibG9jaycgOiAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTY4MDdcdTk4OThcclxuICAgIHVwZGF0ZVRpdGxlKCkge1xyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcudmlldy10aXRsZScpO1xyXG4gICAgICAgIGlmICh0aXRsZSkge1xyXG4gICAgICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRoaXMucGx1Z2luLmZvbGRlclBhdGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlZnJlc2goKSB7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0NvbnRlbnQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmZvbGRlci1pdGVtLCB1bCwgcCwgLmluZm8tY29udGFpbmVyJyk7XHJcbiAgICAgICAgZXhpc3RpbmdDb250ZW50LmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xyXG5cclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVDMEZcdThCRjRcdTY1ODdcdTdBM0ZcdTY1ODdcdTRFRjZcdTU5MzlcdThERUZcdTVGODRcdUZGMENcdTc1MjhcdTRFOEVcdTk1N0ZcdTdCQzdcdTVDMEZcdThCRjRcclxuICAgICAgICBjb25zdCBub3ZlbEZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5mb2xkZXJQYXRoICsgJy9cdTVDMEZcdThCRjRcdTY1ODdcdTdBM0YnO1xyXG4gICAgICAgIGNvbnN0IG5vdmVsRm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5vdmVsRm9sZGVyUGF0aCk7XHJcblxyXG4gICAgICAgIC8vIFx1NzZGNFx1NjNBNVx1ODNCN1x1NTNENlx1NzdFRFx1N0JDN1x1NUMwRlx1OEJGNFx1NjU4N1x1NEVGNlx1OERFRlx1NUY4NFxyXG4gICAgICAgIGNvbnN0IHNob3J0U3RvcnlGaWxlUGF0aCA9IHRoaXMucGx1Z2luLmZvbGRlclBhdGggKyAnL1x1NUMwRlx1OEJGNFx1NkI2M1x1NjU4Ny5tZCc7XHJcbiAgICAgICAgY29uc3Qgc2hvcnRTdG9yeUZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc2hvcnRTdG9yeUZpbGVQYXRoKTtcclxuXHJcbiAgICAgICAgaWYgKG5vdmVsRm9sZGVyICYmIG5vdmVsRm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTk1N0ZcdTdCQzdcdTVDMEZcdThCRjRcdTc2ODRcdTc2RUVcdTVGNTVcdTdFRDNcdTY3ODRcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5SXRlbXMoY29udGFpbmVyLCBub3ZlbEZvbGRlcik7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlRmxvYXRpbmdCdXR0b24oKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNob3J0U3RvcnlGaWxlICYmIHNob3J0U3RvcnlGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU3N0VEXHU3QkM3XHU1QzBGXHU4QkY0XHVGRjBDXHU1QzU1XHU3OTNBXHU1OTI3XHU3RUIyXHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheU91dGxpbmUoY29udGFpbmVyLCBzaG9ydFN0b3J5RmlsZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mbyhjb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRpc3BsYXlJbmZvKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCB7IHNldHRpbmdzIH0gPSB0aGlzLnBsdWdpbjtcclxuICAgICAgICBjb25zdCBpbmZvQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2luZm8tY29udGFpbmVyJyB9KTtcclxuICAgIFxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NzUyOFx1NjIzN1x1OEJCRVx1N0Y2RVx1NEU4Nlx1NTZGRVx1NzI0N1x1OERFRlx1NUY4NFx1RkYwQ1x1NUM1NVx1NzkzQVx1NTZGRVx1NzI0N1xyXG4gICAgICAgIGlmIChzZXR0aW5ncy5waWN0dXJlUGF0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbWFnZVBhdGggPSBgJHtzZXR0aW5ncy5waWN0dXJlUGF0aH1gO1xyXG4gICAgICAgICAgICBpbmZvQ29udGFpbmVyLmNyZWF0ZUVsKCdpbWcnLCB7XHJcbiAgICAgICAgICAgICAgICBhdHRyOiB7IGFsdDogaW1hZ2VQYXRoLCBzcmM6IGltYWdlUGF0aCB9LFxyXG4gICAgICAgICAgICAgICAgY2xzOiAndXNlci1hdmF0YXInXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGluZm9Db250YWluZXIuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiBzZXR0aW5ncy5uYW1lLCBjbHM6ICd1c2VyLW5hbWUnIH0pO1xyXG4gICAgXHJcbiAgICAgICAgdGhpcy5nZXRCb29rQ291bnRBbmRUb3RhbFdvcmRzKCkudGhlbigoeyBub3ZlbENvdW50LCBzaG9ydFN0b3J5Q291bnQgfSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBcdTY4M0NcdTVGMEZcdTUzMTZcdTY2M0VcdTc5M0FcdTY1ODdcdTY3MkNcclxuICAgICAgICAgICAgY29uc3Qgbm92ZWxUZXh0ID0gbm92ZWxDb3VudCA+IDAgPyBgJHtub3ZlbENvdW50fWAgOiBcIjBcIjtcclxuICAgICAgICAgICAgY29uc3Qgc2hvcnRTdG9yeVRleHQgPSBzaG9ydFN0b3J5Q291bnQgPiAwID8gYCR7c2hvcnRTdG9yeUNvdW50fWAgOiBcIjBcIjtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY2M0VcdTc5M0FcdTY1ODdcdTY3MkNcdTc2ODRkaXZcdTUxNDNcdTdEMjBcclxuICAgICAgICAgICAgY29uc3QgaW5mb1RleHQgPSBbXHJcbiAgICAgICAgICAgICAgICBgXHU5NTdGXHU3QkM3XHU1QzBGXHU4QkY0OiAke25vdmVsVGV4dH1gLFxyXG4gICAgICAgICAgICAgICAgYFx1NzdFRFx1N0JDN1x1NUMwRlx1OEJGNDogJHtzaG9ydFN0b3J5VGV4dH1gLFxyXG4gICAgICAgICAgICBdLmpvaW4oJyB8ICcpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGluZm9Db250YWluZXIuY3JlYXRlRGl2KHsgdGV4dDogaW5mb1RleHQsIGNsczogJ2Jvb2staW5mbycgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAgICBcclxuXHJcbiAgICAvLyBcdTVGMDJcdTZCNjVcdTY1QjlcdTZDRDVcdUZGMENcdTc1MjhcdTRFOEVcdTgzQjdcdTUzRDZcdTRFNjZcdTdDNERcdTY1NzBcdTkxQ0ZcdTU0OENcdTYwM0JcdTVCNTdcdTY1NzBcclxuICAgIGFzeW5jIGdldEJvb2tDb3VudEFuZFRvdGFsV29yZHMoKTogUHJvbWlzZTx7IG5vdmVsQ291bnQ6IG51bWJlcjsgc2hvcnRTdG9yeUNvdW50OiBudW1iZXIgfT4ge1xyXG4gICAgICAgIGNvbnN0IHJvb3RGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRSb290KCk7IC8vIFx1ODNCN1x1NTNENlx1NjgzOVx1NzZFRVx1NUY1NVxyXG4gICAgICAgIGxldCBub3ZlbENvdW50ID0gMDtcclxuICAgICAgICBsZXQgc2hvcnRTdG9yeUNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc0ZvbGRlciA9IGFzeW5jIChmb2xkZXI6IFRGb2xkZXIpID0+IHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZvbGRlci5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLnBhdGguZW5kc1dpdGgoJ1x1NEZFMVx1NjA2Ri5tZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuZ2V0RmlsZVR5cGUoY29udGVudCk7IC8vIFx1NjBBOFx1OTcwMFx1ODk4MVx1NUI5RVx1NzNCMFx1OEZEOVx1NEUyQVx1NjVCOVx1NkNENVx1Njc2NVx1NEVDRVx1NTE4NVx1NUJCOVx1NEUyRFx1NjNEMFx1NTNENnR5cGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ25vdmVsJykgbm92ZWxDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnc2hvcnQtc3RvcnknKSBzaG9ydFN0b3J5Q291bnQrKztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwcm9jZXNzRm9sZGVyKGZpbGUpOyAvLyBcdTkwMTJcdTVGNTJcdTU5MDRcdTc0MDZcdTVCNTBcdTY1ODdcdTRFRjZcdTU5MzlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGF3YWl0IHByb2Nlc3NGb2xkZXIocm9vdEZvbGRlcik7XHJcbiAgICAgICAgcmV0dXJuIHsgbm92ZWxDb3VudCwgc2hvcnRTdG9yeUNvdW50IH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU4Rjg1XHU1MkE5XHU2NUI5XHU2Q0Q1XHVGRjBDXHU0RUNFXHU0RkUxXHU2MDZGLm1kXHU3Njg0XHU1MTg1XHU1QkI5XHU0RTJEXHU2M0QwXHU1M0Q2dHlwZVxyXG4gICAgZ2V0RmlsZVR5cGUoY29udGVudDogc3RyaW5nKTogJ25vdmVsJyB8ICdzaG9ydC1zdG9yeScgfCBudWxsIHtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goL3R5cGU6IChub3ZlbHxzaG9ydC1zdG9yeSkvKTtcclxuICAgICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSBhcyAnbm92ZWwnIHwgJ3Nob3J0LXN0b3J5JyA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheUl0ZW1zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGZvbGRlcjogVEZvbGRlcikge1xyXG4gICAgICAgIGZvbGRlci5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmb2xkZXItaXRlbScgfSk7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlGaWxlKGNoaWxkQ29udGFpbmVyLCBjaGlsZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlGb2xkZXIoY2hpbGRDb250YWluZXIsIGNoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlGb2xkZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZm9sZGVyOiBURm9sZGVyKSB7XHJcbiAgICAgICAgY29uc3QgZm9sZGVySXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmb2xkZXItaXRlbScgfSk7XHJcbiAgICAgICAgY29uc3QgZm9sZGVySGVhZGVyID0gZm9sZGVySXRlbS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb2xkZXItaGVhZGVyJyB9KTtcclxuICAgICAgICBjb25zdCBmb2xkZXJOYW1lID0gZm9sZGVySGVhZGVyLmNyZWF0ZUVsKCdkaXYnLHtjbHM6ICdmb2xkZXItbmFtZSd9KTtcclxuICAgICAgICBjb25zdCBmb2xkZXJJY29uID0gZm9sZGVyTmFtZS5jcmVhdGVFbCgnc3BhbicpO1xyXG4gICAgICAgIHNldEljb24oZm9sZGVySWNvbiwgJ2ZvbGRlci1vcGVuJyk7XHJcbiAgICAgICAgZm9sZGVyTmFtZS5jcmVhdGVTcGFuKHt0ZXh0OiBmb2xkZXIubmFtZX0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdG9jQnV0dG9uID0gZm9sZGVySGVhZGVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3RvY0J1dHRvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gdG9jQnV0dG9uLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuICAgICAgICBzZXRJY29uKGFkZEJ1dHRvbiwgJ3BsdXMnKVxyXG5cclxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0b2NCdXR0b24uY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG4gICAgICAgIHNldEljb24oZGVsZXRlQnV0dG9uLCAndHJhc2gnKVxyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi50aXRsZSA9IFwiXHU1MjIwXHU5NjY0XHU2NTg3XHU0RUY2XHU1OTM5XCI7XHJcblxyXG5cclxuICAgICAgICBhZGRCdXR0b24udGl0bGUgPSBcIlx1NjVCMFx1NUVGQVx1N0FFMFx1ODI4MlwiO1xyXG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd05ld0NoYXB0ZXJNb2RhbChmb2xkZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlybURlbGV0ZShmb2xkZXIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBmaWxlTGlzdCA9IGZvbGRlckl0ZW0uY3JlYXRlRWwoJ3VsJywgeyBjbHM6ICdmaWxlLWxpc3QnIH0pO1xyXG4gICAgICAgIGZpbGVMaXN0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIGZvbGRlckhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGZpbGVMaXN0LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgZmlsZUxpc3Quc3R5bGUuZGlzcGxheSA9ICdibG9jaydcclxuICAgICAgICAgICAgICAgIHNldEljb24oZm9sZGVySWNvbiwgJ2ZvbGRlci1vcGVuJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmaWxlTGlzdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgICAgICAgICBzZXRJY29uKGZvbGRlckljb24sICdmb2xkZXItbWludXMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBzb3J0ZWRDaGlsZHJlbiA9IGZvbGRlci5jaGlsZHJlbi5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhIGluc3RhbmNlb2YgVEZpbGUgJiYgYiBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5zdGF0LmN0aW1lIC0gYi5zdGF0LmN0aW1lO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGEgaW5zdGFuY2VvZiBURm9sZGVyICYmIGIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhIGluc3RhbmNlb2YgVEZvbGRlciA/IC0xIDogMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzb3J0ZWRDaGlsZHJlbi5mb3JFYWNoKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlGaWxlKGZpbGVMaXN0LCBmaWxlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5Rm9sZGVyKGZpbGVMaXN0LmNyZWF0ZUVsKCdsaScpLCBmaWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRpc3BsYXlGaWxlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGZpbGU6IFRGaWxlKSB7XHJcbiAgICAgICAgY29uc3QgZmlsZUl0ZW0gPSBjb250YWluZXIuY3JlYXRlRWwoJ2xpJywge2NsczogXCJjaGFwdGVyLXRpdGxlXCIgfSk7XHJcbiAgICAgICAgY29uc3QgZmlsZUhlYWRlciA9IGZpbGVJdGVtLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2ZpbGUtaGVhZGVyJyB9KTtcclxuICAgICAgICBjb25zdCBmaWxlSWNvbiA9IGZpbGVIZWFkZXIuY3JlYXRlRWwoJ3NwYW4nKTtcclxuICAgICAgICBzZXRJY29uKGZpbGVJY29uLCAnZmlsZS10ZXh0Jyk7XHJcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBmaWxlSGVhZGVyLmNyZWF0ZUVsKCdzcGFuJyk7XHJcbiAgICAgICAgY29uc3Qgd29yZENvdW50ID0gYXdhaXQgdGhpcy53b3JkQ291bnRlci5nZXRXb3JkQ291bnQoZmlsZSk7XHJcbiAgICAgICAgZmlsZU5hbWUudGV4dENvbnRlbnQgPSBgJHtmaWxlLm5hbWUucmVwbGFjZSgvXFwubWQkLywgJycpfWA7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGZpbGVJdGVtLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ2RlbGV0ZUJ1dHRvbicgfSk7XHJcbiAgICAgICAgZmlsZUl0ZW0uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1jb3VudCcsIHRleHQ6IGAke3dvcmRDb3VudH1gIH0pO1xyXG4gICAgICAgIHNldEljb24oZGVsZXRlQnV0dG9uLCAndHJhc2gnKVxyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi50aXRsZSA9IFwiXHU1MjIwXHU5NjY0XHU2NTg3XHU0RUY2XCI7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5jb25maXJtRGVsZXRlKGZpbGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmaWxlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChmaWxlLnBhdGgsICcnLCBmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZpbGVJdGVtLmRhdGFzZXQucGF0aCA9IGZpbGUucGF0aDtcclxuICAgIH1cclxuICAgIC8vIFx1NUM1NVx1NzkzQVx1NTkyN1x1N0VCMlx1NzY4NFx1NjVCOVx1NkNENVxyXG4gICAgYXN5bmMgZGlzcGxheU91dGxpbmUoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZmlsZTogVEZpbGUpIHtcclxuICAgICAgICBjb25zdCBvdXRsaW5lID0gYXdhaXQgdGhpcy5nZXRPdXRsaW5lKGZpbGUpOyAvLyBcdTgzQjdcdTUzRDZcdTY1ODdcdTRFRjZcdTU5MjdcdTdFQjJcdTc2ODRcdTY1QjlcdTZDRDVcclxuICAgICAgICB0aGlzLnJlbmRlck91dGxpbmVMaXN0KGNvbnRhaW5lciwgb3V0bGluZSwgMSwgZmlsZSk7IC8vIFx1NjgzOVx1N0VBN1x1NTIyQlx1NEVDRTFcdTVGMDBcdTU5Q0JcdUZGMDhcdTUzNzMjXHVGRjA5XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU5MDEyXHU1RjUyXHU2RTMyXHU2N0QzXHU1OTI3XHU3RUIyXHU1MjE3XHU4ODY4XHU3Njg0XHU2NUI5XHU2Q0Q1XHJcbiAgICBhc3luYyByZW5kZXJPdXRsaW5lTGlzdChjb250YWluZXI6IEhUTUxFbGVtZW50LCB0aXRsZXM6IHN0cmluZ1tdLCBsZXZlbDogbnVtYmVyLCBmaWxlOiBURmlsZSkge1xyXG4gICAgICAgIGNvbnN0IGxpc3RUeXBlID0gbGV2ZWwgPT09IDEgPyAndWwnIDogJ29sJzsgLy8gXHU2ODM5XHU3RUE3XHU1MjJCXHU0RjdGXHU3NTI4XHU2NUUwXHU1RThGXHU1MjE3XHU4ODY4XHVGRjBDXHU1MTc2XHU0RUQ2XHU0RjdGXHU3NTI4XHU2NzA5XHU1RThGXHU1MjE3XHU4ODY4XHJcbiAgICAgICAgY29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVFbChsaXN0VHlwZSwgeyBjbHM6ICdvdXRsaW5lLWxpc3QnIH0pO1xyXG5cclxuICAgICAgICB3aGlsZSAodGl0bGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSB0aXRsZXMuc2hpZnQoKTtcclxuICAgICAgICAgICAgaWYgKHRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbdGV4dCwgbmVzdGVkVGl0bGVzXSA9IHRoaXMuc3BsaXRUaXRsZUFuZENoaWxkcmVuKHRpdGxlLCB0aXRsZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NTMwNVx1NTQyQlx1NjgwN1x1OTg5OFx1NjU4N1x1NjcyQ1x1NzY4NCBkaXZcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlRGl2ID0gbGlzdC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0IH0pO1xyXG4gICAgICAgICAgICAgICAgdGl0bGVEaXYuY2xhc3NOYW1lID0gJ291dGxpbmUtdGl0bGUnOyAvLyBcdTZERkJcdTUyQTBcdTdDN0JcdTU0MERcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTUyMTdcdTg4NjhcdTk4NzlcdUZGMENcdTVFNzZcdTVDMDZcdTY4MDdcdTk4OTggZGl2IFx1NkRGQlx1NTJBMFx1NEUzQVx1NTE3Nlx1NUI1MFx1NTE0M1x1N0QyMFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBsaXN0LmNyZWF0ZUVsKCdsaScpO1xyXG4gICAgICAgICAgICAgICAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQodGl0bGVEaXYpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1NjgzOVx1NjM2RVx1NjgwN1x1OTg5OFx1N0VBN1x1NTIyQlx1NkRGQlx1NTJBMFx1N0YyOVx1OEZEQlx1NjU0OFx1Njc5Q1xyXG4gICAgICAgICAgICAgICAgbGlzdEl0ZW0uc3R5bGUucGFkZGluZ0xlZnQgPSBgJHsxMH1weGA7IC8vIFx1NEUzQVx1NkJDRlx1NEUyQVx1N0VBN1x1NTIyQlx1NkRGQlx1NTJBMDEwcHhcdTc2ODRcdTdGMjlcdThGREJcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdTRFRTVcdTVCOUFcdTRGNERcdTUyMzBcdTY1ODdcdTRFRjZcdTRFMkRcdTc2ODRcdTY4MDdcdTk4OThcdTRGNERcdTdGNkVcclxuICAgICAgICAgICAgICAgIGxpc3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zY3JvbGxUb1RpdGxlKGZpbGUsIHRpdGxlKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NzA5XHU1QjUwXHU2ODA3XHU5ODk4XHVGRjBDXHU5MDEyXHU1RjUyXHU2RTMyXHU2N0QzXHU1QjUwXHU2ODA3XHU5ODk4XHU1MjE3XHU4ODY4XHJcbiAgICAgICAgICAgICAgICBpZiAobmVzdGVkVGl0bGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck91dGxpbmVMaXN0KGxpc3RJdGVtLCBuZXN0ZWRUaXRsZXMsIGxldmVsICsgMSwgZmlsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1NUMwNlx1NUY1M1x1NTI0RFx1NTIxN1x1ODg2OFx1OTg3OVx1NkRGQlx1NTJBMFx1NTIzMFx1NUJCOVx1NTY2OFx1NEUyRFxyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsaXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBzcGxpdFRpdGxlQW5kQ2hpbGRyZW4odGl0bGU6IHN0cmluZywgcmVtYWluaW5nVGl0bGVzOiBzdHJpbmdbXSk6IFtzdHJpbmcsIHN0cmluZ1tdXSB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB0aXRsZS5tYXRjaCgvXigjKylcXHMqKC4qKS8pO1xyXG4gICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJMZXZlbCA9IG1hdGNoWzFdLmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgdGV4dCA9IG1hdGNoWzJdOyAvLyBcdTYzRDBcdTUzRDZcdTY4MDdcdTk4OThcdTY1ODdcdTY3MkNcclxuXHJcbiAgICAgICAgICAgIC8vIFx1NjI3RVx1NTFGQVx1NjI0MFx1NjcwOVx1NUI1MFx1NjgwN1x1OTg5OFxyXG4gICAgICAgICAgICBjb25zdCBuZXN0ZWRUaXRsZXM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtYWluaW5nVGl0bGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0VGl0bGUgPSByZW1haW5pbmdUaXRsZXNbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0TWF0Y2ggPSBuZXh0VGl0bGUubWF0Y2goL14oIyspXFxzKiguKikvKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0TWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0SGVhZGVyTGV2ZWwgPSBuZXh0TWF0Y2hbMV0ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0SGVhZGVyTGV2ZWwgPiBoZWFkZXJMZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXN0ZWRUaXRsZXMucHVzaChuZXh0VGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV4dEhlYWRlckxldmVsIDw9IGhlYWRlckxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU0RUNFIHJlbWFpbmluZ1RpdGxlcyBcdTRFMkRcdTc5RkJcdTk2NjRcdTVERjJcdTU5MDRcdTc0MDZcdTc2ODRcdTVCNTBcdTY4MDdcdTk4OThcclxuICAgICAgICAgICAgcmVtYWluaW5nVGl0bGVzLnNwbGljZSgwLCBuZXN0ZWRUaXRsZXMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBbdGV4dCwgbmVzdGVkVGl0bGVzXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTUzMzlcdTkxNERcdUZGMENcdThGRDRcdTU2REVcdTUzOUZcdTU5Q0JcdTY4MDdcdTk4OThcdTY1ODdcdTY3MkNcdTU0OENcdTdBN0FcdTc2ODRcdTVCNTBcdTY4MDdcdTk4OThcdTY1NzBcdTdFQzRcclxuICAgICAgICAgICAgcmV0dXJuIFt0aXRsZSwgW11dO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTVCOUFcdTRGNERcdTUyMzBcdTY1ODdcdTRFRjZcdTRFMkRcdTc2ODRcdTY4MDdcdTk4OThcdTRGNERcdTdGNkVcdTc2ODRcdTY1QjlcdTZDRDVcclxuICAgIGFzeW5jIHNjcm9sbFRvVGl0bGUoZmlsZTogVEZpbGUsIHRpdGxlOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBmaWxlQ29udGVudC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgY29uc3QgdGl0bGVJbmRleCA9IGxpbmVzLmZpbmRJbmRleChsaW5lID0+IGxpbmUudHJpbSgpID09PSB0aXRsZSk7XHJcblxyXG4gICAgICAgIGlmICh0aXRsZUluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKTtcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZUxlYWYpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBhY3RpdmVMZWFmLnZpZXc7XHJcbiAgICAgICAgICAgICAgICBpZiAodmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IHZpZXcuZWRpdG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiB0aXRsZUluZGV4LCBjaDogMCB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4IHNjcm9sbEludG9WaWV3IFx1OTAwOVx1OTg3OVx1NTNDMlx1NjU3MFxyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyh7IGZyb206IHsgbGluZTogdGl0bGVJbmRleCwgY2g6IDAgfSwgdG86IHsgbGluZTogdGl0bGVJbmRleCwgY2g6IDAgfSB9LCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTUwNDdcdThCQkVcdTc2ODRcdTgzQjdcdTUzRDZcdTY1ODdcdTRFRjZcdTU5MjdcdTdFQjJcdTc2ODRcdTY1QjlcdTZDRDVcdUZGMENcdTk3MDBcdTg5ODFcdTYwQThcdTY4MzlcdTYzNkVcdTVCOUVcdTk2NDVcdTYwQzVcdTUxQjVcdTVCOUVcdTczQjBcclxuICAgIGFzeW5jIGdldE91dGxpbmUoZmlsZTogVEZpbGUpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnRzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IGZpbGVDb250ZW50cy5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgY29uc3QgdGl0bGVzID0gbGluZXMuZmlsdGVyKGxpbmUgPT4gbGluZS5zdGFydHNXaXRoKCcjJykpLm1hcChsaW5lID0+IGxpbmUudHJpbSgpKTtcclxuICAgICAgICByZXR1cm4gdGl0bGVzO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZUZpbGUoZmlsZTogVEZpbGUpIHtcclxuICAgICAgICBjb25zdCBmaWxlSXRlbSA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihgbGlbZGF0YS1wYXRoPVwiJHtmaWxlLnBhdGh9XCJdYCk7XHJcbiAgICAgICAgaWYgKGZpbGVJdGVtKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZS5uYW1lLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcclxuICAgICAgICAgICAgY29uc3Qgd29yZENvdW50ID0gYXdhaXQgdGhpcy53b3JkQ291bnRlci5nZXRXb3JkQ291bnQoZmlsZSk7XHJcbiAgICAgICAgICAgIGZpbGVJdGVtLnRleHRDb250ZW50ID0gYCR7ZmlsZU5hbWV9ICgke3dvcmRDb3VudH0gd29yZHMpYDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2hvd05ld0NoYXB0ZXJNb2RhbChmb2xkZXI6IFRGb2xkZXIpIHtcclxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBOZXdDaGFwdGVyTW9kYWwodGhpcy5hcHAsIGZvbGRlciwgdGhpcywgJ1x1N0FFMFx1ODI4MicgLHRoaXMucmVmcmVzaCk7XHJcbiAgICAgICAgbW9kYWwub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNob3dOZXdJdGVtTW9kYWwoKSB7XHJcbiAgICAgICAgY29uc3Qgcm9vdEZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5mb2xkZXJQYXRoICsgJy9cdTVDMEZcdThCRjRcdTY1ODdcdTdBM0YnO1xyXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChyb290Rm9sZGVyUGF0aCk7XHJcbiAgICAgICAgaWYgKGZvbGRlciAmJiBmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE5ld0l0ZW1Nb2RhbCh0aGlzLmFwcCwgZm9sZGVyLCB0aGlzLCB0aGlzLnJlZnJlc2gpO1xyXG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU2NTg3XHU0RUY2XHU1OTM5XHU2NzJBXHU1M0QxXHU3M0IwOiAke3Jvb3RGb2xkZXJQYXRofWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uZmlybURlbGV0ZShmaWxlT3JGb2xkZXI6IFRGaWxlIHwgVEZvbGRlcikge1xyXG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IENvbmZpcm1EZWxldGVNb2RhbCh0aGlzLmFwcCwgZmlsZU9yRm9sZGVyLCB0aGlzLCB0aGlzLnJlZnJlc2gpO1xyXG4gICAgICAgIG1vZGFsLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbkNsb3NlKCkge1xyXG4gICAgICAgIC8vIENsZWFuIHVwIHdoZW4gdmlldyBpcyBjbG9zZWQsIGlmIG5lY2Vzc2FyeVxyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5cclxuLy8gV29yZENvdW50ZXJcdTdDN0JcdUZGMENcdTc1MjhcdTRFOEVcdTdFREZcdThCQTFcdTVCNTdcdTY1NzBcclxuZXhwb3J0IGNsYXNzIFdvcmRDb3VudGVyIHtcclxuICAgIHBsdWdpbjogTXlQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFdvcmRDb3VudChmaWxlOiBURmlsZSk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnRzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICAgICAgY29uc3QgY291bnRQdW5jdHVhdGlvbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvdW50UHVuY3R1YXRpb247XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gZmlsZUNvbnRlbnRzLnJlcGxhY2UoL1xccy9nLCAnJyk7XHJcblxyXG4gICAgICAgIGlmICghY291bnRQdW5jdHVhdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCBub1B1bmN0dWF0aW9uID0gd29yZHMucmVwbGFjZSgvW1xccHtQfVxccHtTfV0vZ3UsICcnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5vUHVuY3R1YXRpb24ubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHdvcmRzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRUb3RhbFdvcmRDb3VudChmb2xkZXI6IFRGb2xkZXIpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgICAgIGxldCB0b3RhbFdvcmRDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbGN1bGF0ZVdvcmRDb3VudCA9IGFzeW5jIChmb2xkZXI6IFRGb2xkZXIpID0+IHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZENvdW50ID0gYXdhaXQgdGhpcy5nZXRXb3JkQ291bnQoY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsV29yZENvdW50ICs9IHdvcmRDb3VudDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsY3VsYXRlV29yZENvdW50KGNoaWxkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGF3YWl0IGNhbGN1bGF0ZVdvcmRDb3VudChmb2xkZXIpO1xyXG4gICAgICAgIHJldHVybiB0b3RhbFdvcmRDb3VudDtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBBcHAsIEJ1dHRvbkNvbXBvbmVudCwgSXRlbVZpZXcsIE1vZGFsLCBURmlsZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuXHJcbi8vIFx1NTIyMFx1OTY2NFx1Nzg2RVx1OEJBNFx1NzY4NFx1NkEyMVx1NjAwMVx1Njg0NlxyXG5leHBvcnQgY2xhc3MgQ29uZmlybURlbGV0ZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgZmlsZU9yRm9sZGVyOiBURmlsZSB8IFRGb2xkZXI7XHJcbiAgICB2aWV3OiBJdGVtVmlldztcclxuICAgIHJlZnJlc2hDYWxsYmFjazogKCkgPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZU9yRm9sZGVyOiBURmlsZSB8IFRGb2xkZXIsIHZpZXc6IEl0ZW1WaWV3LCByZWZyZXNoQ2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMuZmlsZU9yRm9sZGVyID0gZmlsZU9yRm9sZGVyO1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IGNsczogJ3BsdWdpbk1vZGFsJywgdGV4dDogJ1x1Nzg2RVx1OEJBNFx1NTIyMFx1OTY2NCcgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbGVUeXBlID0gdGhpcy5maWxlT3JGb2xkZXIgaW5zdGFuY2VvZiBURmlsZSA/ICdcdTY1ODdcdTRFRjYnIDogJ1x1NjU4N1x1NEVGNlx1NTkzOSc7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgXHU1MjIwXHU5NjY0JHtmaWxlVHlwZX1cdTIwMTRcdTIwMTRgIH0pO1xyXG4gICAgICAgIGNvbnN0IHN0cm9uZ3RleHQgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAke3RoaXMuZmlsZU9yRm9sZGVyLm5hbWUucmVwbGFjZSgvXFwubWQkLywgJycpfWAgfSk7XHJcbiAgICAgICAgc3Ryb25ndGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgIHN0cm9uZ3RleHQuc3R5bGUuY29sb3IgPSAndmFyKC0tYm9sZC1jb2xvciknO1xyXG4gICAgICAgIG5ldyBCdXR0b25Db21wb25lbnQoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHU1MjIwXHU5NjY0JylcclxuICAgICAgICAgICAgLnNldEN0YSgpXHJcbiAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LnRyYXNoKHRoaXMuZmlsZU9yRm9sZGVyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1NTNENlx1NkQ4OCcpXHJcbiAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBJdGVtVmlldywgVEZvbGRlciwgTm90aWNlLCBNb2RhbCwgVGV4dENvbXBvbmVudCwgQnV0dG9uQ29tcG9uZW50LCBBcHB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8vIFx1NjVCMFx1NUVGQVx1N0FFMFx1ODI4Mlx1NzY4NFx1NkEyMVx1NjAwMVx1Njg0NlxyXG5leHBvcnQgY2xhc3MgTmV3Q2hhcHRlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgZm9sZGVyOiBURm9sZGVyO1xyXG4gICAgdmlldzogSXRlbVZpZXc7XHJcbiAgICBpdGVtVHlwZTogc3RyaW5nOyAvLyBcdTY1QjBcdTVFRkFcdTk4NzlcdTc2RUVcdTc2ODRcdTdDN0JcdTU3OEJcdUZGMENcdTRGOEJcdTU5ODIgXCJcdTdBRTBcdTgyODJcIlx1MzAwMVwiXHU3MDc1XHU2MTFGXCIgXHU3QjQ5XHJcbiAgICByZWZyZXNoQ2FsbGJhY2s6ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGZvbGRlcjogVEZvbGRlciwgdmlldzogSXRlbVZpZXcsIGl0ZW1UeXBlOiBzdHJpbmcsIHJlZnJlc2hDYWxsYmFjazogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5mb2xkZXIgPSBmb2xkZXI7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgICAgICB0aGlzLml0ZW1UeXBlID0gaXRlbVR5cGU7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbGJhY2sgPSByZWZyZXNoQ2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IGNsczogJ3BsdWdpbk1vZGFsJywgdGV4dDogYFx1NjVCMFx1NUVGQSR7dGhpcy5pdGVtVHlwZX1gIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBpbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KGNvbnRlbnRFbCk7XHJcbiAgICAgICAgaW5wdXQuc2V0UGxhY2Vob2xkZXIoYCR7dGhpcy5pdGVtVHlwZX1cdTU0MERcdTc5RjBgKTtcclxuXHJcbiAgICAgICAgbmV3IEJ1dHRvbkNvbXBvbmVudChjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTUyMUJcdTVFRkEnKVxyXG4gICAgICAgICAgICAuc2V0Q3RhKClcclxuICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBpbnB1dC5nZXRWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYCR7dGhpcy5pdGVtVHlwZX1cdTU0MERcdTc5RjBcdTRFMERcdTgwRkRcdTRFM0FcdTdBN0FgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt0aGlzLmZvbGRlci5wYXRofS8ke2ZpbGVOYW1lfS5tZGA7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsICcnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBJdGVtVmlldywgVEZvbGRlciwgTm90aWNlLCBNb2RhbCwgVGV4dENvbXBvbmVudCwgQnV0dG9uQ29tcG9uZW50LCBBcHB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8vIFx1NjVCMFx1NUVGQVx1Njc2MVx1NzZFRVx1NkEyMVx1NjAwMVx1Njg0NlxyXG5leHBvcnQgY2xhc3MgTmV3SXRlbU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgZm9sZGVyOiBURm9sZGVyO1xyXG4gICAgdmlldzogSXRlbVZpZXc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGZvbGRlcjogVEZvbGRlciwgdmlldzogSXRlbVZpZXcsIHJlZnJlc2hDYWxsYmFjazogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5mb2xkZXIgPSBmb2xkZXI7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHU2NUIwXHU1RUZBXHU1Mzc3L1x1N0FFMFx1ODI4MicsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbmFtZUlucHV0ID0gbmV3IFRleHRDb21wb25lbnQoY29udGVudEVsKTtcclxuICAgICAgICBuYW1lSW5wdXQuc2V0UGxhY2Vob2xkZXIoJ1x1OEY5M1x1NTE2NVx1NTM3Ny9cdTdBRTBcdTgyODJcdTU0MERcdTc5RjAuLi4nKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3JlYXRlRm9sZGVyQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChjb250ZW50RWwpO1xyXG4gICAgICAgIGNyZWF0ZUZvbGRlckJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdTY1QjBcdTUzNzcnKVxyXG4gICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbmFtZUlucHV0LmdldFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihgJHt0aGlzLmZvbGRlci5wYXRofS8ke25hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRm9sZGVyICcke25hbWV9JyBjcmVhdGVkLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNyZWF0ZUZpbGVCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRlbnRFbCk7XHJcbiAgICAgICAgY3JlYXRlRmlsZUJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdTY1QjBcdTdBRTBcdTgyODInKVxyXG4gICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbmFtZUlucHV0LmdldFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7dGhpcy5mb2xkZXIucGF0aH0vJHtuYW1lfS5tZGA7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRmlsZSAnJHtuYW1lfS5tZCcgY3JlYXRlZC5gKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGb2xkZXIsIFRGaWxlLCBOb3RpY2UsIHBhcnNlWWFtbCwgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBXb3JkQ291bnRlciB9IGZyb20gJy4uL2hlbHBlci9Xb3JkQ291bnQnO1xyXG5pbXBvcnQgeyBDb25maXJtRGVsZXRlTW9kYWwgfSBmcm9tICcuLi9tb2RlbC9kZWxldGVNb2RhbCc7XHJcbmltcG9ydCB7IE5ld0Jvb2tNb2RhbCB9IGZyb20gJy4uL21vZGVsL25ld0Jvb2tNb2RhbCc7XHJcblxyXG5leHBvcnQgY29uc3QgVklFV19UWVBFX0JPT0tTSEVMRiA9ICdib29rc2hlbGYtdmlldyc7XHJcblxyXG4vLyBcdTRFNjZcdTY3QjZcdTg5QzZcdTU2RkVcclxuZXhwb3J0IGNsYXNzIEJvb2tzaGVsZlZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XHJcbiAgICBwbHVnaW46IE15UGx1Z2luO1xyXG4gICAgd29yZENvdW50ZXI6IFdvcmRDb3VudGVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihsZWFmKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLndvcmRDb3VudGVyID0gbmV3IFdvcmRDb3VudGVyKHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5pY29uID0gJ2Jvb2snO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFZJRVdfVFlQRV9CT09LU0hFTEY7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ0Jvb2tzaGVsZic7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XHJcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEU2Nlx1N0M0RFx1NTIxN1x1ODg2OFx1NUJCOVx1NTY2OFxyXG4gICAgICAgIGNvbnN0IGJvb2tMaXN0ID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdib29rLWxpc3QtY29udGFpbmVyJyB9KTtcclxuICAgICAgICBib29rTGlzdC5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gYHJlcGVhdCgke3RoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tzUGVyUm93fSwgMWZyKWBcclxuICAgICAgICB0aGlzLnRvZ2dsZUZsb2F0aW5nQnV0dG9uKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICB9XHJcbiAgICB0b2dnbGVGbG9hdGluZ0J1dHRvbigpIHtcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTZENkVcdTUyQThcdTYzMDlcdTk0QUVcclxuICAgICAgICBjb25zdCBmbG9hdGluZ0J1dHRvbiA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgY2xzOiAnZmxvYXRpbmctYnV0dG9uJyB9KTtcclxuICAgICAgICBzZXRJY29uKGZsb2F0aW5nQnV0dG9uLCAncGx1cycpO1xyXG4gICAgICAgIGZsb2F0aW5nQnV0dG9uLnRpdGxlID0gJ1x1NjVCMFx1NUVGQVx1NEU2Nlx1N0M0RCc7XHJcbiAgICAgICAgZmxvYXRpbmdCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd05ld0Jvb2tNb2RhbCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7IC8vIFx1NEVDNVx1NkUwNVx1N0E3QVx1NEU2Nlx1N0M0RFx1NTIxN1x1ODg2OFx1NUJCOVx1NTY2OFxyXG4gICAgICAgIGNvbnN0IGJvb2tMaXN0Q29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdib29rLWxpc3QtY29udGFpbmVyJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBib29rTGlzdENvbnRhaW5lci5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gYHJlcGVhdCgke3RoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tzUGVyUm93fSwgMWZyKWA7XHJcblxyXG4gICAgICAgIGNvbnN0IHJvb3RGb2xkZXIgPSBcIi9cIjtcclxuICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocm9vdEZvbGRlcik7XHJcbiAgICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kaXNwbGF5Qm9va3MoYm9va0xpc3RDb250YWluZXIsIGZvbGRlcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2ODM5XHU2NTg3XHU0RUY2XHU1OTM5XHU2NzJBXHU2MjdFXHU1MjMwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudG9nZ2xlRmxvYXRpbmdCdXR0b24oKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkaXNwbGF5Qm9va3MoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcm9vdEZvbGRlcjogVEZvbGRlcikge1xyXG4gICAgICAgIGNvbnN0IGJvb2tGb2xkZXJzID0gcm9vdEZvbGRlci5jaGlsZHJlbi5maWx0ZXIoY2hpbGQgPT4gY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSBhcyBURm9sZGVyW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBmb2xkZXIgb2YgYm9va0ZvbGRlcnMpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5mb0ZpbGUgPSBmb2xkZXIuY2hpbGRyZW4uZmluZChmaWxlID0+IGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLm5hbWUgPT09ICdcdTRGRTFcdTYwNkYubWQnKSBhcyBURmlsZTtcclxuICAgICAgICAgICAgaWYgKGluZm9GaWxlKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoaW5mb0ZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHlhbWxIZWFkZXIgPSBmaWxlQ29udGVudHMuc3BsaXQoJy0tLScpWzFdPy50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZVlhbWwgPSBwYXJzZVlhbWwoeWFtbEhlYWRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVZYW1sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdmVsRm9sZGVyID0gZm9sZGVyLmNoaWxkcmVuLmZpbmQoZmlsZSA9PiBmaWxlIGluc3RhbmNlb2YgVEZvbGRlciAmJiBmaWxlLm5hbWUgPT09ICdcdTVDMEZcdThCRjRcdTY1ODdcdTdBM0YnKSBhcyBURm9sZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdG9yeUZpbGUgPSBmb2xkZXIuY2hpbGRyZW4uZmluZChmaWxlID0+IGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLm5hbWUgPT09ICdcdTVDMEZcdThCRjRcdTZCNjNcdTY1ODcubWQnKSBhcyBURmlsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdmVsRm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFdvcmRDb3VudCA9IGF3YWl0IHRoaXMud29yZENvdW50ZXIuZ2V0VG90YWxXb3JkQ291bnQobm92ZWxGb2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5Qm9vayhjb250YWluZXIsIGZvbGRlciwgZmlsZVlhbWwudHlwZSwgdG90YWxXb3JkQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0b3J5RmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG90YWxXb3JkQ291bnQgPSBhd2FpdCB0aGlzLndvcmRDb3VudGVyLmdldFdvcmRDb3VudChzdG9yeUZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5Qm9vayhjb250YWluZXIsIGZvbGRlciwgZmlsZVlhbWwudHlwZSwgdG90YWxXb3JkQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1QzBGXHU4QkY0XHU2NTg3XHU0RUY2XHU1OTM5XHU2NzJBXHU1M0QxXHU3M0IwICR7Zm9sZGVyLm5hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1ODlFM1x1Njc5MFx1NEZFMVx1NjA2Ri5tZFx1NjU4N1x1NEVGNlx1NjVGNlx1NTFGQVx1OTUxOScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlCb29rKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGZvbGRlcjogVEZvbGRlciwgdHlwZTogc3RyaW5nLCB0b3RhbFdvcmRDb3VudDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgYm9va0l0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYm9vay1pdGVtJyB9KTtcclxuICAgICAgICBib29rSXRlbS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdib29rLXRpdGxlJywgdGV4dDogZm9sZGVyLm5hbWUgfSk7XHJcbiAgICAgICAgYm9va0l0ZW0uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYm9vay1jb3VudCcsIHRleHQ6IGAke3RvdGFsV29yZENvdW50fSBcdTVCNTdgIH0pO1xyXG4gICAgICAgIGJvb2tJdGVtLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Jvb2stdHlwZScsIHRleHQ6IHR5cGUgPT09ICdub3ZlbCcgPyAnXHU5NTdGXHU3QkM3JyA6ICdcdTc3RURcdTdCQzcnIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBib29rSXRlbS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnXHU1MjIwXHU5NjY0JywgY2xzOiAnZGVsZXRlQnV0dG9uUGx1cycgfSk7XHJcbiAgICAgICAgc2V0SWNvbihkZWxldGVCdXR0b24sICd0cmFzaCcpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi50aXRsZSA9IFwiXHU1MjIwXHU5NjY0XHU3MDc1XHU2MTFGXCI7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5jb25maXJtRGVsZXRlKGZvbGRlcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJvb2tJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXRGb2xkZXJQYXRoKGZvbGRlci5wYXRoKTtcclxuICAgICAgICAgICAgY29uc3Qgbm92ZWxGb2xkZXJQYXRoID0gYCR7dGhpcy5wbHVnaW4uZm9sZGVyUGF0aH0vXHU1QzBGXHU4QkY0XHU2NTg3XHU3QTNGYDtcclxuICAgICAgICAgICAgY29uc3Qgbm92ZWxGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobm92ZWxGb2xkZXJQYXRoKTtcclxuICAgICAgICAgICAgaWYgKG5vdmVsRm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGF0ZXN0RmlsZSA9IHRoaXMuZ2V0TGF0ZXN0RmlsZShub3ZlbEZvbGRlcik7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF0ZXN0RmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQobGF0ZXN0RmlsZS5wYXRoLCAnJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTUzRDFcdTczQjBcdTY3MDBcdTY1QjBcdTY1ODdcdTRFRjYnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRQYXRoID0gdHlwZSA9PT0gJ25vdmVsJyA/IGAke3RoaXMucGx1Z2luLmZvbGRlclBhdGh9L1x1NUMwRlx1OEJGNFx1NjU4N1x1N0EzRi9cdTY3MkFcdTU0N0RcdTU0MERcdTdBRTBcdTgyODIubWRgIDogYCR7dGhpcy5wbHVnaW4uZm9sZGVyUGF0aH0vXHU1QzBGXHU4QkY0XHU2QjYzXHU2NTg3Lm1kYDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZGVmYXVsdFBhdGgsICcnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMYXRlc3RGaWxlKGZvbGRlcjogVEZvbGRlcik6IFRGaWxlIHwgbnVsbCB7XHJcbiAgICAgICAgbGV0IGxhdGVzdEZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XHJcbiAgICAgICAgbGV0IGxhdGVzdFRpbWUgPSAwO1xyXG5cclxuICAgICAgICBjb25zdCBjaGVja0ZpbGUgPSAoZmlsZTogVEZpbGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGZpbGUuc3RhdC5jdGltZSA+IGxhdGVzdFRpbWUpIHtcclxuICAgICAgICAgICAgICAgIGxhdGVzdFRpbWUgPSBmaWxlLnN0YXQuY3RpbWU7XHJcbiAgICAgICAgICAgICAgICBsYXRlc3RGaWxlID0gZmlsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHRyYXZlcnNlRm9sZGVyID0gKGZvbGRlcjogVEZvbGRlcikgPT4ge1xyXG4gICAgICAgICAgICBmb2xkZXIuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tGaWxlKGNoaWxkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VGb2xkZXIoY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0cmF2ZXJzZUZvbGRlcihmb2xkZXIpO1xyXG4gICAgICAgIHJldHVybiBsYXRlc3RGaWxlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbmZpcm1EZWxldGUoZmlsZU9yRm9sZGVyOiBURmlsZSB8IFRGb2xkZXIpIHtcclxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBDb25maXJtRGVsZXRlTW9kYWwodGhpcy5hcHAsIGZpbGVPckZvbGRlciwgdGhpcywgdGhpcy5yZWZyZXNoLmJpbmQodGhpcykpO1xyXG4gICAgICAgIG1vZGFsLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzaG93TmV3Qm9va01vZGFsKCkge1xyXG4gICAgICAgIGNvbnN0IHJvb3RGb2xkZXJQYXRoID0gJy8nO1xyXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChyb290Rm9sZGVyUGF0aCk7XHJcbiAgICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTmV3Qm9va01vZGFsKHRoaXMuYXBwLCBmb2xkZXIsIHRoaXMsIHRoaXMucmVmcmVzaC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgbW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjgzOVx1NjU4N1x1NEVGNlx1NTkzOVx1NjcyQVx1NjI3RVx1NTIzMCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4uZm9sZGVyUGF0aCA9ICcnO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEl0ZW1WaWV3LCBURm9sZGVyLCBOb3RpY2UsIEJ1dHRvbkNvbXBvbmVudCwgVGV4dENvbXBvbmVudCwgTW9kYWwsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8vIFx1NjVCMFx1NUVGQVx1NTZGRVx1NEU2NlxyXG5leHBvcnQgY2xhc3MgTmV3Qm9va01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgZm9sZGVyOiBURm9sZGVyO1xyXG4gICAgdmlldzogSXRlbVZpZXc7XHJcbiAgICByZWZyZXNoQ2FsbGJhY2s6ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGZvbGRlcjogVEZvbGRlciwgdmlldzogSXRlbVZpZXcsIHJlZnJlc2hDYWxsYmFjazogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5mb2xkZXIgPSBmb2xkZXI7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgY2xzOiAncGx1Z2luTW9kYWwnLCB0ZXh0OiAnXHU2NUIwXHU1RUZBXHU0RTY2XHU3QzREJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5mb0Zvcm0gPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnaW5mby1mb3JtJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbmFtZWxhYmVsRWwgPSBpbmZvRm9ybS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICduYW1lLWxhYmVsJyB9KTtcclxuICAgICAgICBuYW1lbGFiZWxFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnXHU0RTY2XHU3QzREXHU1NDBEXHU3OUYwJywgY2xzOiAnaW5wdXQtbGFiZWwnIH0pO1xyXG4gICAgICAgIGNvbnN0IG5hbWVJbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KG5hbWVsYWJlbEVsKTtcclxuICAgICAgICBuYW1lSW5wdXQuc2V0UGxhY2Vob2xkZXIoJ1x1NTcyOFx1NkI2NFx1OEY5M1x1NTE2NVx1NEU2Nlx1N0M0RFx1NTQwRFx1NzlGMCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEU2Nlx1N0M0RFx1N0M3Qlx1NTc4Qlx1NEUwQlx1NjJDOVx1OTAwOVx1NjJFOVx1Njg0NlxyXG4gICAgICAgIGNvbnN0IGJvb2tUeXBlTGFiZWwgPSBuYW1lbGFiZWxFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBcIlx1NUMwRlx1OEJGNFx1N0M3Qlx1NTc4Qlx1RkYxQVwiLCBjbHM6ICdvcHRpb24tbGFiZWwnIH0pO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdEVsID0gYm9va1R5cGVMYWJlbC5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdib29rLXR5cGUtc2VsZWN0JyB9KTtcclxuICAgICAgICBzZWxlY3RFbC5pZCA9ICdib29rVHlwZSc7IC8vIFx1N0VEOSBzZWxlY3QgXHU1MTQzXHU3RDIwXHU0RTAwXHU0RTJBIElEXHJcblxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQSBcdTIwMUNcdTk1N0ZcdTdCQzdcdTVDMEZcdThCRjRcdTIwMUQgXHU5MDA5XHU5ODc5XHU1RTc2XHU2REZCXHU1MkEwXHU1MjMwXHU0RTBCXHU2MkM5XHU5MDA5XHU2MkU5XHU2ODQ2XHJcbiAgICAgICAgY29uc3Qgbm92ZWxPcHRpb24gPSBzZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywge1xyXG4gICAgICAgICAgICBhdHRyOiB7IHZhbHVlOiAnbm92ZWwnLCBzZWxlY3RlZDogJ3NlbGVjdGVkJyB9IC8vIFx1NTIxRFx1NTlDQlx1OUVEOFx1OEJBNFx1OTAwOVx1NEUyRFx1OTU3Rlx1N0JDN1x1NUMwRlx1OEJGNFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5vdmVsT3B0aW9uLnRleHRDb250ZW50ID0gJ1x1OTU3Rlx1N0JDN1x1NUMwRlx1OEJGNCc7XHJcblxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQSBcdTIwMUNcdTc3RURcdTdCQzdcdTVDMEZcdThCRjRcdTIwMUQgXHU5MDA5XHU5ODc5XHU1RTc2XHU2REZCXHU1MkEwXHU1MjMwXHU0RTBCXHU2MkM5XHU5MDA5XHU2MkU5XHU2ODQ2XHJcbiAgICAgICAgY29uc3Qgc2hvcnRTdG9yeU9wdGlvbiA9IHNlbGVjdEVsLmNyZWF0ZUVsKCdvcHRpb24nLCB7IGF0dHI6IHsgdmFsdWU6ICdzaG9ydC1zdG9yeScgfSB9KTtcclxuICAgICAgICBzaG9ydFN0b3J5T3B0aW9uLnRleHRDb250ZW50ID0gJ1x1NzdFRFx1N0JDN1x1NUMwRlx1OEJGNCc7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlc2NsYWJlbEVsID0gaW5mb0Zvcm0uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZGVzYy1sYWJlbCcgfSk7XHJcbiAgICAgICAgZGVzY2xhYmVsRWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ1x1NEU2Nlx1N0M0RFx1N0I4MFx1NEVDQicsIGNsczogJ2lucHV0LWxhYmVsJyB9KTtcclxuICAgICAgICBjb25zdCBkZXNjSW5wdXRFbCA9IGRlc2NsYWJlbEVsLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHsgY2xzOiAnYm9vay1kZXNjcmlwdGlvbi10ZXh0YXJlYScgfSk7XHJcbiAgICAgICAgZGVzY0lucHV0RWwucGxhY2Vob2xkZXIgPSAnXHU4QkY3XHU4RjkzXHU1MTY1XHU0RTY2XHU3QzREXHU3QjgwXHU0RUNCJztcclxuICAgICAgICBkZXNjSW5wdXRFbC5yb3dzID0gMTA7XHJcbiAgICAgICAgZGVzY0lucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcblxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1Nzg2RVx1OEJBNFx1NjMwOVx1OTRBRVxyXG4gICAgICAgIG5ldyBCdXR0b25Db21wb25lbnQoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHU1MjFCXHU1RUZBJylcclxuICAgICAgICAgICAgLnNldEN0YSgpXHJcbiAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJvb2tOYW1lID0gbmFtZUlucHV0LmdldFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib29rRGVzYyA9IGRlc2NJbnB1dEVsLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvb2tUeXBlID0gJ25vdmVsJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29rVHlwZScpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgYm9va1R5cGUgPSBzZWxlY3RlZFR5cGUudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTlBOENcdThCQzFcdTRFNjZcdTdDNERcdTU0MERcdTc5RjBcdTY2MkZcdTU0MjZcdTRFM0FcdTdBN0FcclxuICAgICAgICAgICAgICAgIGlmIChib29rTmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU0RTY2XHU3QzREXHU1NDBEXHU3OUYwXHU0RTBEXHU4MEZEXHU0RTNBXHU3QTdBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGJvb2tGb2xkZXJQYXRoID0gYCR7dGhpcy5mb2xkZXIucGF0aH0vJHtib29rTmFtZX1gO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Rm9sZGVyID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGJvb2tGb2xkZXJQYXRoKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobmV3Rm9sZGVyLnBhdGggKyAnL1x1NEZFMVx1NjA2Ri5tZCcsIGAtLS1cXG50eXBlOiAke2Jvb2tUeXBlfVxcbi0tLVxcblx1NTQwRFx1NzlGMDogJHtib29rTmFtZX1cXG5cdTdCODBcdTRFQ0I6ICR7Ym9va0Rlc2N9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvb2tUeXBlID09PSAnbm92ZWwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdmVsRm9sZGVyID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKG5ld0ZvbGRlci5wYXRoICsgJy9cdTVDMEZcdThCRjRcdTY1ODdcdTdBM0YnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG5vdmVsRm9sZGVyLnBhdGggKyAnL1x1NjcyQVx1NTQ3RFx1NTQwRFx1N0FFMFx1ODI4Mi5tZCcsICcnKTsgLy8gXHU1MjFCXHU1RUZBXHU3QTdBXHU3QUUwXHU4MjgyXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChib29rVHlwZSA9PT0gJ3Nob3J0LXN0b3J5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobmV3Rm9sZGVyLnBhdGggKyAnL1x1NUMwRlx1OEJGNFx1NkI2M1x1NjU4Ny5tZCcsICcnKTsgLy8gXHU1MjFCXHU1RUZBXHU3QTdBXHU3QUUwXHU4MjgyXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NEU2Nlx1N0M0RFx1NURGMlx1NTIxQlx1NUVGQScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1NTNENlx1NkQ4OCcpXHJcbiAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZvbGRlciwgVEZpbGUsIHNldEljb24sIE5vdGljZSwgTWFya2Rvd25SZW5kZXJlciwgcGFyc2VZYW1sIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgTXlQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IENvbmZpcm1EZWxldGVNb2RhbCB9IGZyb20gJy4uL21vZGVsL2RlbGV0ZU1vZGFsJztcclxuaW1wb3J0IHsgTmV3SW5zcGlyYXRpb25Nb2RhbCB9IGZyb20gJ3NyYy9tb2RlbC9JbnNwaXJhdGlvbk1vZGFsJztcclxuaW1wb3J0IHsgTmV3Q2hhcHRlck1vZGFsIH0gZnJvbSAnc3JjL21vZGVsL25ld0NoYXB0ZXJNb2RhbCc7XHJcbmltcG9ydCB7IE5ld0l0ZW1Nb2RhbCB9IGZyb20gJ3NyYy9tb2RlbC9uZXdJdGVtTW9kYWwnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9CT09LX1NFVFRJTkcgPSAnYm9vay1zZXR0aW5nJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCb29rU2V0dGluZ1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XHJcbiAgICBwbHVnaW46IE15UGx1Z2luO1xyXG4gICAgdGFic0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgICBjb250ZW50Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIGN1cnJlbnRUYWIgPSAnXHU1OTI3XHU3RUIyJztcclxuICAgIHNldENvbnRlbnRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgY3VycmVudERpc3BsYXllZEZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMuaWNvbiA9ICdib29rLXRleHQnO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFZJRVdfVFlQRV9CT09LX1NFVFRJTkc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ1x1NEU2Nlx1N0M0RFx1OEJCRVx1NUI5QSc7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb25PcGVuKCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctY29udGVudCcgfSk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVmcmVzaCgpIHtcclxuICAgICAgICBjb25zdCBwcmV2aW91c1RhYiA9IHRoaXMuY3VycmVudFRhYjtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uZm9sZGVyUGF0aCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNob3dJbnNwaXJhdGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZm9GaWxlUGF0aCA9IGAke3RoaXMucGx1Z2luLmZvbGRlclBhdGh9L1x1NEZFMVx1NjA2Ri5tZGA7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoaW5mb0ZpbGVQYXRoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeWFtbEhlYWRlciA9IGF3YWl0IHRoaXMuZ2V0RmlsZVlhbWwoaW5mb0ZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeWFtbEhlYWRlcj8udHlwZSA9PT0gJ3Nob3J0LXN0b3J5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNob3J0U3RvcnlPdXRsaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVTZXRWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFRhYiA9IHByZXZpb3VzVGFiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNob3dWaWV3Q29udGVudCh0aGlzLmN1cnJlbnRUYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50RGlzcGxheWVkRmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJGaWxlQ29udGVudCh0aGlzLmN1cnJlbnREaXNwbGF5ZWRGaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4OUUzXHU2NzkwXHU0RkUxXHU2MDZGLm1kXHU2NTg3XHU0RUY2XHU2NUY2XHU1MUZBXHU5NTE5Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MkFcdTYyN0VcdTUyMzBcdTRGRTFcdTYwNkYubWRcdTY1ODdcdTRFRjZcdTYyMTZcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcdTRFMERcdTZCNjNcdTc4NkUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRGaWxlWWFtbChmaWxlUGF0aDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICBjb25zdCB5YW1sSGVhZGVyID0gZmlsZUNvbnRlbnRzLnNwbGl0KCctLS0nKVsxXT8udHJpbSgpO1xyXG4gICAgICAgICAgICByZXR1cm4geWFtbEhlYWRlciA/IHBhcnNlWWFtbCh5YW1sSGVhZGVyKSA6IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NTg3XHU0RUY2XHU2NzJBXHU2MjdFXHU1MjMwXHU2MjE2XHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHU0RTBEXHU2QjYzXHU3ODZFJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzaG9ydFN0b3J5T3V0bGluZSgpIHtcclxuICAgICAgICBjb25zdCBvdXRsaW5lQ29udGVudCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnb3V0bGluZS1jb250YWluZXInIH0pO1xyXG4gICAgICAgIGNvbnN0IHNob3J0U3RvcnlPdXRsaW5lUGF0aCA9IGAke3RoaXMucGx1Z2luLmZvbGRlclBhdGh9L1x1NTkyN1x1N0VCMi5tZGA7XHJcbiAgICAgICAgY29uc3Qgc2hvcnRTdG9yeU91dGxpbmUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc2hvcnRTdG9yeU91dGxpbmVQYXRoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0Q29udGVudENvbnRhaW5lclRpdGxlID0gb3V0bGluZUNvbnRlbnQuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHU1OTI3XHU3RUIyJywgY2xzOiAnc2V0LWNvbnRlbnQtdGl0bGUnIH0pO1xyXG4gICAgICAgIGNvbnN0IG1vZGlmeUJ1dHRvbiA9IHNldENvbnRlbnRDb250YWluZXJUaXRsZS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RpZnktYnV0dG9uJyB9KTtcclxuICAgICAgICBzZXRJY29uKG1vZGlmeUJ1dHRvbiwgJ3BlbmNpbCcpO1xyXG4gICAgICAgIG1vZGlmeUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChzaG9ydFN0b3J5T3V0bGluZVBhdGgsICcnLCBmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChzaG9ydFN0b3J5T3V0bGluZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChzaG9ydFN0b3J5T3V0bGluZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNob3J0U3RvcnlUb2MgPSBvdXRsaW5lQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdvdXRsaW5lLWNvbnRlbnQnIH0pO1xyXG4gICAgICAgICAgICBzaG9ydFN0b3J5VG9jLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKHRoaXMuYXBwLCBmaWxlQ29udGVudCwgc2hvcnRTdG9yeVRvYywgc2hvcnRTdG9yeU91dGxpbmVQYXRoLCB0aGlzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTU5MjdcdTdFQjJcdTY1ODdcdTRFRjZcdTY3MkFcdTYyN0VcdTUyMzAnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2hvd0luc3BpcmF0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IGluc3BpcmF0aW9uUGF0aCA9ICdAXHU5NjQ0XHU0RUY2L1x1NzA3NVx1NjExRic7XHJcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGluc3BpcmF0aW9uUGF0aCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGluc3BpcmF0aW9uVGl0bGUgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgY2xzOiAndmlldy10aXRsZScgfSk7XHJcbiAgICAgICAgaW5zcGlyYXRpb25UaXRsZS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1x1NzA3NVx1NjExRicgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGluc3BpcmF0aW9uSWNvbiA9IGluc3BpcmF0aW9uVGl0bGUuY3JlYXRlRWwoJ3NwYW4nKTtcclxuICAgICAgICBzZXRJY29uKGluc3BpcmF0aW9uSWNvbiwgJ3BsdXMnKTtcclxuICAgICAgICBpbnNwaXJhdGlvbkljb24udGl0bGUgPSAnXHU2REZCXHU1MkEwXHU3MDc1XHU2MTFGJztcclxuICAgICAgICBpbnNwaXJhdGlvbkljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dOZXdJbnNwaXJhdGlvbk1vZGFsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGlzcGxheUluc3BpcmF0aW9uSXRlbShjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOidoaW50LWluZm8nLCB0ZXh0OiAnXHU2NzJBXHU2MjdFXHU1MjMwXHU3MDc1XHU2MTFGXHU2NTg3XHU0RUY2XHU1OTM5XHUzMDAyJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGlzcGxheUluc3BpcmF0aW9uSXRlbShjaGlsZDogVEZpbGUpIHtcclxuICAgICAgICBjb25zdCBmaWxlSXRlbSA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnaW5zcGlyYXRpb24taXRlbScgfSk7XHJcbiAgICAgICAgZmlsZUl0ZW0uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogY2hpbGQubmFtZS5yZXBsYWNlKC9cXC5tZCQvLCAnJyksIGNsczogJ2ZpbGUtdGl0bGUnIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBmaWxlSXRlbS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdkZWxldGVCdXR0b25QbHVzJyB9KTtcclxuICAgICAgICBzZXRJY29uKGRlbGV0ZUJ1dHRvbiwgJ3RyYXNoJyk7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLnRpdGxlID0gXCJcdTUyMjBcdTk2NjRcdTcwNzVcdTYxMUZcIjtcclxuXHJcbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGNoaWxkKTtcclxuICAgICAgICBjb25zdCBzbmlwcGV0ID0gZmlsZUNvbnRlbnQuc3BsaXQoJ1xcbicpLnNsaWNlKDAsIDUpLmpvaW4oJ1xcbicpO1xyXG4gICAgICAgIGZpbGVJdGVtLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBzbmlwcGV0IH0pO1xyXG5cclxuICAgICAgICBmaWxlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChjaGlsZC5wYXRoLCAnJywgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpcm1EZWxldGUoY2hpbGQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNob3dOZXdJbnNwaXJhdGlvbk1vZGFsKCkge1xyXG4gICAgICAgIGNvbnN0IGluc3BpcmF0aW9uUGF0aCA9ICdAXHU5NjQ0XHU0RUY2L1x1NzA3NVx1NjExRic7XHJcbiAgICAgICAgbGV0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChpbnNwaXJhdGlvblBhdGgpO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihpbnNwaXJhdGlvblBhdGgpO1xyXG4gICAgICAgICAgICAgICAgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGluc3BpcmF0aW9uUGF0aCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTUyMUJcdTVFRkFcdTcwNzVcdTYxMUZcdTY1ODdcdTRFRjZcdTU5MzlcdTY1RjZcdTUxRkFcdTk1MTknKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE5ld0luc3BpcmF0aW9uTW9kYWwodGhpcy5hcHAsIGZvbGRlciwgdGhpcywgdGhpcy5yZWZyZXNoLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NTg3XHU0RUY2XHU1OTM5XHU2NzJBXHU2MjdFXHU1MjMwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgYXN5bmMgc2hvd1ZpZXdDb250ZW50KHRhYk5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuY29udGVudENvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdGb2xkZXJQYXRoID0gYCR7dGhpcy5wbHVnaW4uZm9sZGVyUGF0aH0vXHU4QkJFXHU1QjlBLyR7dGFiTmFtZX1gO1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc2V0dGluZ0ZvbGRlclBhdGgpO1xyXG4gICAgICAgIGlmIChzZXR0aW5nRm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlJdGVtcyh0aGlzLmNvbnRlbnRDb250YWluZXIsIHNldHRpbmdGb2xkZXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6J2hpbnQtaW5mbycsIHRleHQ6IGBcdTY3MkFcdTYyN0VcdTUyMzAke3RhYk5hbWV9XHU2NTg3XHU0RUY2XHU1OTM5YCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlU2V0VmlldygpIHtcclxuICAgICAgICBjb25zdCBzZXRNYWluQ29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXQtbWFpbi1jb250YWluZXInIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNldENvbnRlbnRDb250YWluZXIgPSBzZXRNYWluQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2l0ZW0tY29udGFpbmVyJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbGlzdENvbnRhaW5lciA9IHNldE1haW5Db250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbGlzdC1jb250YWluZXInIH0pO1xyXG4gICAgICAgIGNvbnN0IGxpc3RIZWFkZXJDb250YWluZXIgPSBsaXN0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xpc3QtY29udGFpbmVyLWhlYWRlcicgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5TmFtZURpdiA9IGxpc3RIZWFkZXJDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY2F0ZWdvcnktaW5wdXQnIH0pO1xyXG4gICAgICAgIGNvbnN0IGlucHV0Q2F0ZWdvcnlOYW1lID0gY2F0ZWdvcnlOYW1lRGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgcGxhY2Vob2xkZXI6ICdcdTUyMDZcdTdDN0JcdTU0MERcdTc5RjAnIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBsaXN0SGVhZGVySWNvbiA9IGxpc3RIZWFkZXJDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbGlzdC1oZWFkZXItaWNvbicgfSk7XHJcbiAgICAgICAgc2V0SWNvbihsaXN0SGVhZGVySWNvbiwgJ3BsdXMnKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGlzdENvbnRlbnRDb250YWluZXIgPSBsaXN0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xpc3QtY29udGFpbmVyLW1haW4nIH0pO1xyXG4gICAgICAgIGNvbnN0IHRhYnNDb250YWluZXIgPSBzZXRNYWluQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3RhYnMtY29udGFpbmVyJyB9KTtcclxuICAgICAgICBjb25zdCB0YWJzVG9wID0gdGFic0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd0YWJzLXRvcCcgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRhYnMgPSBbJ1x1NTkyN1x1N0VCMicsICdcdTg5RDJcdTgyNzInLCAnXHU4QkJFXHU1QjlBJywgJ1x1NzA3NVx1NjExRiddO1xyXG4gICAgICAgIGNvbnN0IHRhYnNJY29uID0gWydsaXN0JywgJ3VzZXItY29nJywgJ2ZpbGUtY29nJywgJ2xpZ2h0YnVsYiddO1xyXG4gICAgICAgIGNvbnN0IHRhYnNBcnJheTogSFRNTERpdkVsZW1lbnRbXSA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVBbmREaXNwbGF5TGlzdCA9IGFzeW5jICh0YWJOYW1lOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gdGFiTmFtZTtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFNldHRpbmdGb2xkZXJQYXRoID0gYCR7dGhpcy5wbHVnaW4uZm9sZGVyUGF0aH0vXHU4QkJFXHU1QjlBLyR7dGFiTmFtZX1gO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U2V0dGluZ0ZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjdXJyZW50U2V0dGluZ0ZvbGRlclBhdGgpO1xyXG5cclxuICAgICAgICAgICAgbGlzdENvbnRlbnRDb250YWluZXIuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50U2V0dGluZ0ZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheUl0ZW1zKGxpc3RDb250ZW50Q29udGFpbmVyLCBjdXJyZW50U2V0dGluZ0ZvbGRlcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0Q29udGVudENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6J2hpbnQtaW5mbycsIHRleHQ6IGAke3RhYk5hbWV9XHU0RTBCXHU2NUUwXHU2NTg3XHU0RUY2YCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxpc3RIZWFkZXJJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdDYXRlZ29yeU5hbWUgPSBpbnB1dENhdGVnb3J5TmFtZS52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmIChuZXdDYXRlZ29yeU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VTZXR0aW5nRm9sZGVyUGF0aCA9IGAke3RoaXMucGx1Z2luLmZvbGRlclBhdGh9L1x1OEJCRVx1NUI5QWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U2V0dGluZ0ZvbGRlclBhdGggPSBgJHtiYXNlU2V0dGluZ0ZvbGRlclBhdGh9LyR7dGhpcy5jdXJyZW50VGFifWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdDYXRlZ29yeVBhdGggPSBgJHtjdXJyZW50U2V0dGluZ0ZvbGRlclBhdGh9LyR7bmV3Q2F0ZWdvcnlOYW1lfWA7XHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgY3JlYXRlRm9sZGVySWZOb3RFeGlzdHMuY2FsbCh0aGlzLCBiYXNlU2V0dGluZ0ZvbGRlclBhdGgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgY3JlYXRlRm9sZGVySWZOb3RFeGlzdHMuY2FsbCh0aGlzLCBjdXJyZW50U2V0dGluZ0ZvbGRlclBhdGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihuZXdDYXRlZ29yeVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRGlzcGxheUxpc3QodGhpcy5jdXJyZW50VGFiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1NTIwNlx1N0M3Qlx1NTQwRFx1NzlGMCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUZvbGRlcklmTm90RXhpc3RzKHBhdGg6IHN0cmluZykge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XHJcbiAgICAgICAgICAgIGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRQYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sYXN0SW5kZXhPZignLycpKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0ZUZvbGRlcklmTm90RXhpc3RzLmNhbGwodGhpcywgcGFyZW50UGF0aCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIocGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVwZGF0ZUFuZERpc3BsYXlMaXN0KHRoaXMuY3VycmVudFRhYik7XHJcblxyXG4gICAgICAgIHRhYnMuZm9yRWFjaCh0YWJOYW1lID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGFiID0gdGFic1RvcC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd0YWItYnV0dG9uJyB9KTtcclxuICAgICAgICAgICAgdGFic0FycmF5LnB1c2godGFiKTtcclxuICAgICAgICAgICAgdGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlQW5kRGlzcGxheUxpc3QodGFiTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGFic0FycmF5LmZvckVhY2godCA9PiB0LnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpKTtcclxuICAgICAgICAgICAgICAgIHRhYi5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNob3dWaWV3Q29udGVudCh0YWJOYW1lKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGFiTmFtZSA9PT0gdGhpcy5jdXJyZW50VGFiKSB7XHJcbiAgICAgICAgICAgICAgICB0YWIuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYkljb24gPSB0YWIuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgICAgIHRhYi5jcmVhdGVEaXYoeyBjbHM6ICd0YWItbmFtZScsIHRleHQ6IHRhYk5hbWUgfSk7XHJcbiAgICAgICAgICAgIHNldEljb24odGFiSWNvbiwgdGFic0ljb25bdGFicy5pbmRleE9mKHRhYk5hbWUpXSk7XHJcbiAgICAgICAgICAgIHRhYi50aXRsZSA9IHRhYk5hbWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheUl0ZW1zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGZvbGRlcjogVEZvbGRlcikge1xyXG4gICAgICAgIGZvbGRlci5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmb2xkZXItaXRlbScgfSk7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlGaWxlKGNoaWxkQ29udGFpbmVyLCBjaGlsZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlGb2xkZXIoY2hpbGRDb250YWluZXIsIGNoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlGb2xkZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZm9sZGVyOiBURm9sZGVyKSB7XHJcbiAgICAgICAgY29uc3QgZm9sZGVySXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmb2xkZXItaXRlbScgfSk7XHJcbiAgICAgICAgY29uc3QgZm9sZGVySGVhZGVyID0gZm9sZGVySXRlbS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb2xkZXItaGVhZGVyJyB9KTtcclxuICAgICAgICBjb25zdCBmb2xkZXJOYW1lID0gZm9sZGVySGVhZGVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2ZvbGRlci1uYW1lJyB9KTtcclxuICAgICAgICBjb25zdCBmb2xkZXJJY29uID0gZm9sZGVyTmFtZS5jcmVhdGVFbCgnc3BhbicpO1xyXG4gICAgICAgIHNldEljb24oZm9sZGVySWNvbiwgJ2ZvbGRlci1vcGVuJyk7XHJcbiAgICAgICAgZm9sZGVyTmFtZS5jcmVhdGVTcGFuKHsgdGV4dDogZm9sZGVyLm5hbWUgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvY0J1dHRvbiA9IGZvbGRlckhlYWRlci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd0b2NCdXR0b24nIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSB0b2NCdXR0b24uY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG4gICAgICAgIHNldEljb24oYWRkQnV0dG9uLCAncGx1cycpO1xyXG4gICAgICAgIGFkZEJ1dHRvbi50aXRsZSA9IFwiXHU2REZCXHU1MkEwXCI7XHJcbiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5zaG93TmV3Q2hhcHRlck1vZGFsKGZvbGRlcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRvY0J1dHRvbi5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcbiAgICAgICAgc2V0SWNvbihkZWxldGVCdXR0b24sICd0cmFzaCcpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi50aXRsZSA9IFwiXHU1MjIwXHU5NjY0XHU1MjA2XHU3QzdCXCI7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5jb25maXJtRGVsZXRlKGZvbGRlcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbGVMaXN0ID0gZm9sZGVySXRlbS5jcmVhdGVFbCgndWwnLCB7IGNsczogJ2ZpbGUtbGlzdCcgfSk7XHJcbiAgICAgICAgZmlsZUxpc3Quc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgZm9sZGVySGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBmaWxlTGlzdC5zdHlsZS5kaXNwbGF5ID0gZmlsZUxpc3Quc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJ2Jsb2NrJyA6ICdub25lJztcclxuICAgICAgICAgICAgc2V0SWNvbihmb2xkZXJJY29uLCBmaWxlTGlzdC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnZm9sZGVyLW1pbnVzJyA6ICdmb2xkZXItb3BlbicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBzb3J0ZWRDaGlsZHJlbiA9IGZvbGRlci5jaGlsZHJlbi5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhIGluc3RhbmNlb2YgVEZpbGUgJiYgYiBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5zdGF0LmN0aW1lIC0gYi5zdGF0LmN0aW1lO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGEgaW5zdGFuY2VvZiBURm9sZGVyICYmIGIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNvcnRlZENoaWxkcmVuLmZvckVhY2goZmlsZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheUZpbGUoZmlsZUxpc3QsIGZpbGUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlGb2xkZXIoZmlsZUxpc3QuY3JlYXRlRWwoJ2xpJyksIGZpbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGlzcGxheUZpbGUoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZmlsZTogVEZpbGUpIHtcclxuICAgICAgICBjb25zdCBmaWxlSXRlbSA9IGNvbnRhaW5lci5jcmVhdGVFbCgnbGknLCB7IGNsczogXCJjaGFwdGVyLXRpdGxlXCIgfSk7XHJcbiAgICAgICAgY29uc3QgZmlsZUhlYWRlciA9IGZpbGVJdGVtLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2ZpbGUtaGVhZGVyJyB9KTtcclxuICAgICAgICBjb25zdCBmaWxlSWNvbiA9IGZpbGVIZWFkZXIuY3JlYXRlRWwoJ3NwYW4nKTtcclxuICAgICAgICBzZXRJY29uKGZpbGVJY29uLCAnZmlsZS10ZXh0Jyk7XHJcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBmaWxlSGVhZGVyLmNyZWF0ZUVsKCdzcGFuJyk7XHJcbiAgICAgICAgZmlsZU5hbWUudGV4dENvbnRlbnQgPSBmaWxlLm5hbWUucmVwbGFjZSgvXFwubWQkLywgJycpO1xyXG5cclxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBmaWxlSXRlbS5jcmVhdGVFbCgnYnV0dG9uJywgeyBjbHM6ICdkZWxldGVCdXR0b24nIH0pO1xyXG4gICAgICAgIHNldEljb24oZGVsZXRlQnV0dG9uLCAndHJhc2gnKTtcclxuICAgICAgICBkZWxldGVCdXR0b24udGl0bGUgPSBcIlx1NTIyMFx1OTY2NFx1NjU4N1x1NEVGNlwiO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlybURlbGV0ZShmaWxlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZmlsZU5hbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudERpc3BsYXllZEZpbGUgPSBmaWxlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckZpbGVDb250ZW50KGZpbGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmaWxlSXRlbS5kYXRhc2V0LnBhdGggPSBmaWxlLnBhdGg7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVuZGVyRmlsZUNvbnRlbnQoZmlsZTogVEZpbGUpIHtcclxuICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICAgICAgY29uc3Qgc2V0Q29udGVudENvbnRhaW5lciA9IHRoaXMuc2V0Q29udGVudENvbnRhaW5lcjtcclxuICAgICAgICBzZXRDb250ZW50Q29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgY29uc3Qgc2V0Q29udGVudENvbnRhaW5lclRpdGxlID0gc2V0Q29udGVudENvbnRhaW5lci5jcmVhdGVFbCgnaDInLCB7IGNsczogJ3NldC1jb250ZW50LXRpdGxlJywgdGV4dDogYCR7dGhpcy5jdXJyZW50VGFifVx1MjAxNFx1MjAxNCR7ZmlsZS5uYW1lLnJlcGxhY2UoL1xcLm1kJC8sICcnKX1gIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBzZXRDb250ZW50Q29udGFpbmVyTWFpbiA9IHNldENvbnRlbnRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0LWNvbnRlbnQtY29udGFpbmVyLW1haW4nIH0pO1xyXG4gICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKHRoaXMuYXBwLCBmaWxlQ29udGVudCwgc2V0Q29udGVudENvbnRhaW5lck1haW4sIGZpbGUucGF0aCwgdGhpcyk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1vZGlmeUJ1dHRvbiA9IHNldENvbnRlbnRDb250YWluZXJUaXRsZS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RpZnktYnV0dG9uJyB9KTtcclxuICAgICAgICBzZXRJY29uKG1vZGlmeUJ1dHRvbiwgJ3BlbmNpbCcpO1xyXG4gICAgICAgIG1vZGlmeUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChmaWxlLnBhdGgsICcnLCBmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2hvd05ld0NoYXB0ZXJNb2RhbChmb2xkZXI6IFRGb2xkZXIpIHtcclxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBOZXdDaGFwdGVyTW9kYWwodGhpcy5hcHAsIGZvbGRlciwgdGhpcywgJycsIHRoaXMucmVmcmVzaC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBtb2RhbC5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2hvd05ld0l0ZW1Nb2RhbChmb2xkZXJQYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XHJcbiAgICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTmV3SXRlbU1vZGFsKHRoaXMuYXBwLCBmb2xkZXIsIHRoaXMsIHRoaXMucmVmcmVzaC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgbW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NjU4N1x1NEVGNlx1NTkzOVx1NjcyQVx1NTNEMVx1NzNCMDogJHtmb2xkZXJQYXRofWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25maXJtRGVsZXRlKGZpbGVPckZvbGRlcjogVEZpbGUgfCBURm9sZGVyKSB7XHJcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgQ29uZmlybURlbGV0ZU1vZGFsKHRoaXMuYXBwLCBmaWxlT3JGb2xkZXIsIHRoaXMsIHRoaXMucmVmcmVzaC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBtb2RhbC5vcGVuKCk7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCwgQnV0dG9uQ29tcG9uZW50LCBJdGVtVmlldywgTW9kYWwsIE5vdGljZSwgVGV4dENvbXBvbmVudCwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuLy8gXHU2NUIwXHU1RUZBXHU3MDc1XHU2MTFGXHU3Njg0XHU2QTIxXHU2MDAxXHU2ODQ2XHJcbmV4cG9ydCBjbGFzcyBOZXdJbnNwaXJhdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgZm9sZGVyOiBURm9sZGVyO1xyXG4gICAgdmlldzogSXRlbVZpZXc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGZvbGRlcjogVEZvbGRlciwgdmlldzogSXRlbVZpZXcsIHJlZnJlc2hDYWxsYmFjazogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5mb2xkZXIgPSBmb2xkZXI7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgY2xzOiAncGx1Z2luTW9kYWwnLCB0ZXh0OiAnXHU2REZCXHU1MkEwXHU3MDc1XHU2MTFGJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudChjb250ZW50RWwpO1xyXG4gICAgICAgIGlucHV0LnNldFBsYWNlaG9sZGVyKCdcdTcwNzVcdTYxMUZcdTY4MDdcdTk4OTgnKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGVzY0lucHV0RWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3RleHRhcmVhJywgeyBjbHM6ICdpbnNwaXJhdGlvbi10ZXh0YXJlYScgfSk7XHJcbiAgICAgICAgZGVzY0lucHV0RWwucGxhY2Vob2xkZXIgPSAnXHU3MDc1XHU2MTFGXHU4QkU2XHU3RUM2XHU1MTg1XHU1QkI5JztcclxuICAgICAgICBkZXNjSW5wdXRFbC5yb3dzID0gMTA7XHJcbiAgICAgICAgZGVzY0lucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcblxyXG4gICAgICAgIG5ldyBCdXR0b25Db21wb25lbnQoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHU1MjFCXHU1RUZBJylcclxuICAgICAgICAgICAgLnNldEN0YSgpXHJcbiAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gaW5wdXQuZ2V0VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gZGVzY0lucHV0RWwudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU3MDc1XHU2MTFGXHU2ODA3XHU5ODk4XHU0RTBEXHU4MEZEXHU0RTNBXHU3QTdBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke3RoaXMuZm9sZGVyLnBhdGh9LyR7ZmlsZU5hbWV9Lm1kYDtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgZmlsZUNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG9CQUFxRjs7O0FDQXJGLElBQUFDLG1CQUFzRjs7O0FDQXRGLHNCQUErQjtBQUl4QixJQUFNLGNBQU4sTUFBa0I7QUFBQSxFQUdyQixZQUFZLFFB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Q0FBQyxNQUF6RCxtQkFBNEQ7QUFDNUUsUUFBSSxTQUFTO0FBQ1QsY0FBUSxZQUFZO0FBQ3BCLGNBQVEsUUFBUTtBQUFBLElBQ3BCO0FBQUEsRUFDSjtBQUFBLEVBRUEseUJBQXlCO0FBekw3QjtBQTBMUSxVQUFNLG1CQUFrQixVQUFLLElBQUksVUFBVSxnQkFBZ0Isc0JBQXNCLEVBQUUsQ0FBQyxNQUE1RCxtQkFBK0Q7QUFDdkYsUUFBSSxpQkFBaUI7QUFDakIsc0JBQWdCLFFBQVE7QUFBQSxJQUM1QjtBQUFBLEVBQ0o7QUFBQSxFQUVBLHVCQUF1QjtBQWhNM0I7QUFpTVEsVUFBTSxpQkFBZ0IsVUFBSyxJQUFJLFVBQVUsZ0JBQWdCLG1CQUFtQixFQUFFLENBQUMsTUFBekQsbUJBQTREO0FBQ2xGLFFBQUksZUFBZTtBQUNmLG9CQUFjLFFBQVE7QUFBQSxJQUMxQjtBQUFBLEVBQ0o7QUFBQSxFQUVBLFdBQVc7QUFDUCxTQUFLLElBQUksVUFBVSxtQkFBbUIsbUJBQW1CO0FBQ3pELFNBQUssSUFBSSxVQUFVLG1CQUFtQixtQkFBbUI7QUFBQSxFQUM3RDtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ2pCLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFDN0U7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNyQztBQUNKOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImZvbGRlciIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImZvbGRlciIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIl0KfQo=
